# 666è·¯å¾„æ€»å’Œ IV
<p>å¯¹äºä¸€æ£µæ·±åº¦å°äº&nbsp;<code>5</code>&nbsp;çš„æ ‘ï¼Œå¯ä»¥ç”¨ä¸€ç»„ä¸‰ä½åè¿›åˆ¶æ•´æ•°æ¥è¡¨ç¤ºã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼š</p>

<ul>
	<li>ç™¾ä½ä¸Šçš„æ•°å­—è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ <code>d</code>ï¼Œ<code>1 &lt;= d&nbsp;&lt;= 4</code>ã€‚</li>
	<li>åä½ä¸Šçš„æ•°å­—è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹åœ¨å½“å‰å±‚æ‰€åœ¨çš„ä½ç½® <code>P</code>ï¼Œ <code>1 &lt;= p&nbsp;&lt;= 8</code>ã€‚ä½ç½®ç¼–å·ä¸ä¸€æ£µæ»¡äºŒå‰æ ‘çš„ä½ç½®ç¼–å·ç›¸åŒã€‚</li>
	<li>ä¸ªä½ä¸Šçš„æ•°å­—è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹çš„æƒå€¼ <code>v</code>ï¼Œ<code>0 &lt;= v&nbsp;&lt;= 9</code>ã€‚</li>
</ul>

<p>ç»™å®šä¸€ä¸ªåŒ…å«ä¸‰ä½æ•´æ•°çš„&nbsp;<strong>å‡åº&nbsp;</strong>æ•°ç»„&nbsp;<code>nums</code>&nbsp;ï¼Œè¡¨ç¤ºä¸€æ£µæ·±åº¦å°äº <code>5</code> çš„äºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å› <em>ä»æ ¹åˆ°æ‰€æœ‰å¶å­ç»“ç‚¹çš„è·¯å¾„ä¹‹å’Œ&nbsp;</em>ã€‚</p>

<p><strong>ä¿è¯&nbsp;</strong>ç»™å®šçš„æ•°ç»„è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆçš„è¿æ¥äºŒå‰æ ‘ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2021/04/30/pathsum4-1-tree.jpg" /></p>

<pre>
<strong>è¾“å…¥:</strong> nums = [113, 215, 221]
<strong>è¾“å‡º:</strong> 12
<strong>è§£é‡Š:</strong> åˆ—è¡¨æ‰€è¡¨ç¤ºçš„æ ‘å¦‚ä¸Šæ‰€ç¤ºã€‚
è·¯å¾„å’Œ = (3 + 5) + (3 + 1) = 12.
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2021/04/30/pathsum4-2-tree.jpg" /></p>

<pre>
<strong>è¾“å…¥:</strong> nums = [113, 221]
<strong>è¾“å‡º:</strong> 4
<strong>è§£é‡Š:</strong> åˆ—è¡¨æ‰€è¡¨ç¤ºçš„æ ‘å¦‚ä¸Šæ‰€ç¤ºã€‚
è·¯å¾„å’Œ = (3 + 1) = 4.
</pre>

<p>&nbsp;</p>

<p><strong>æç¤º:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 15</code></li>
	<li><code>110 &lt;= nums[i] &lt;= 489</code></li>
	<li><code>nums</code>&nbsp;è¡¨ç¤ºæ·±åº¦å°äº&nbsp;<code>5</code> çš„æœ‰æ•ˆäºŒå‰æ ‘</li>
</ul>
































# è§£é¢˜:
# 1.è·¯å¾„å’Œ IV
####  æ–¹æ³•ä¸€ï¼šè½¬æ¢æˆæ ‘ [Accepted]
å°†æ•°ç»„ç»™å®šçš„æ•°æ®æ„é€ ä¸€é¢—æ ‘ã€‚ç„¶åè®¡ç®—ä»æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„ä¹‹å’Œï¼Œå°±å¾—åˆ°ç­”æ¡ˆã€‚

**ç®—æ³•ï¼š**
- åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œæ„é€ æ ‘å’Œéå†æ ‘ã€‚
- åœ¨æ ‘çš„æ„é€ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰æ·±åº¦ã€ä½ç½®å’Œæƒå€¼è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ¡ä»¶ `pos - 1 < 2*(depth - 2)` æ¥åˆ¤æ–­ç»“ç‚¹åœ¨å³è¾¹è¿˜æ˜¯å·¦è¾¹ã€‚ä¾‹å¦‚ï¼Œå½“ `depth = 4` æ—¶ï¼Œ`pos` å¯å– `1, 2, 3, 4, 5, 6, 7, 8`ï¼Œå½“ `pos<=4` æ—¶ï¼Œç»“ç‚¹çš„ä½ç½®åœ¨å·¦è¾¹ã€‚
- åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„ç­–ç•¥éå†æ ‘ï¼Œå¹¶æ²¿ç€æˆ‘ä»¬æ‰€èµ°è¿‡çš„è·¯å¾„è®°å½•å½“å‰å’Œã€‚æ¯å½“æˆ‘ä»¬åˆ°è¾¾ä¸€ä¸ªå¶ç»“ç‚¹ `(node.left == null && node.right == null)` æ—¶ï¼Œå°†è¯¥è·¯å¾„çš„å’Œæ·»åŠ åˆ°ç­”æ¡ˆä¸­ã€‚

```Python [ ]
class Node(object):
    def __init__(self, val):
        self.val = val
        self.left = self.right = None

class Solution(object):
    def pathSum(self, nums):
        self.ans = 0
        root = Node(nums[0] % 10)

        for x in nums[1:]:
            depth, pos, val = x/100, x/10 % 10, x % 10
            pos -= 1
            cur = root
            for d in xrange(depth - 2, -1, -1):
                if pos < 2**d:
                    cur.left = cur = cur.left or Node(val)
                else:
                    cur.right = cur = cur.right or Node(val)

                pos %= 2**d

        def dfs(node, running_sum = 0):
            if not node: return
            running_sum += node.val
            if not node.left and not node.right:
                self.ans += running_sum
            else:
                dfs(node.left, running_sum)
                dfs(node.right, running_sum)

        dfs(root)
        return self.ans
```

```Java [ ]
class Solution {
    int ans = 0;
    public int pathSum(int[] nums) {
        Node root = new Node(nums[0] % 10);
        for (int num: nums) {
            if (num == nums[0]) continue;
            int depth = num / 100, pos = num / 10 % 10, val = num % 10;
            pos--;
            Node cur = root;
            for (int d = depth - 2; d >= 0; --d) {
                if (pos < 1<<d) {
                    if (cur.left == null) cur.left = new Node(val);
                    cur = cur.left;
                } else {
                    if (cur.right == null) cur.right = new Node(val);
                    cur = cur.right;
                }
                pos %= 1<<d;
            }
        }

        dfs(root, 0);
        return ans;
    }

    public void dfs(Node node, int sum) {
        if (node == null) return;
        sum += node.val;
        if (node.left == null && node.right == null) {
            ans += sum;
        } else {
            dfs(node.left, sum);
            dfs(node.right, sum);
        }
    }
}

class Node {
    Node left, right;
    int val;
    Node(int v) {val = v;}
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ã€‚å…¶ä¸­ $N$ æ˜¯ `nums` çš„é•¿åº¦ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ä¸­éšå¼è°ƒç”¨å †æ ˆçš„å¤§å°ã€‚


####  æ–¹æ³•äºŒï¼šç›´æ¥éå† [Accepted]
**ç®—æ³•ï¼š**
åœ¨æ–¹æ³• 1 ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æ ‘ä¸Šè¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚ä¸€ä¸ªçœæ—¶çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬æ ¹æ®ç­‰å¼ `root = num / 10 = 10 * depth + pos` ä½œä¸ºæ ¹èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚åˆ™å·¦å­ç»“ç‚¹çš„æ ‡è¯†ç¬¦æ˜¯ `left = 10 * (depth + 1) + 2 * pos - 1`ï¼Œè€Œå³å­èŠ‚ç‚¹åˆ™æ˜¯ `right = left + 1`ã€‚

```Python [ ]
class Solution(object):
    def pathSum(self, nums):
        self.ans = 0
        values = {x / 10: x % 10 for x in nums}
        def dfs(node, running_sum = 0):
            if node not in values: return
            running_sum += values[node]
            depth, pos = divmod(node, 10)
            left = (depth + 1) * 10 + 2 * pos - 1
            right = left + 1

            if left not in values and right not in values:
                self.ans += running_sum
            else:
                dfs(left, running_sum)
                dfs(right, running_sum)

        dfs(nums[0] / 10)
        return self.ans
```

```Java [ ]
class Solution {
    int ans = 0;
    Map<Integer, Integer> values;
    public int pathSum(int[] nums) {
        values = new HashMap();
        for (int num: nums)
            values.put(num / 10, num % 10);

        dfs(nums[0] / 10, 0);
        return ans;
    }

    public void dfs(int node, int sum) {
        if (!values.containsKey(node)) return;
        sum += values.get(node);

        int depth = node / 10, pos = node % 10;
        int left = (depth + 1) * 10 + 2 * pos - 1;
        int right = left + 1;

        if (!values.containsKey(left) && !values.containsKey(right)) {
            ans += sum;
        } else {
            dfs(left, sum);
            dfs(right, sum);
        }
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œåˆ†æä¸æ–¹æ³• 1 ç›¸åŒã€‚
# 2.ã€å‰åºéå†ã€‘æ— éœ€æ„é€ æ ‘ä¹Ÿèƒ½æ±‚è§£çš„è¶…ç®€å•æ€è·¯ï¼ˆä¸€çœ‹å°±æ‡‚ï¼‰
ğŸ’¡å†™åœ¨å‰é¢ï¼šè‡´åŠ›äºå†™å‡ºæœ€å¥½ç†è§£çš„é¢˜è§£ã€‚

# ä¸‰ä½æ•°åŒ…å«çš„ä¿¡æ¯æ€ä¹ˆç®—
é¦–å…ˆå¾—å¾—åˆ°ç»“ç‚¹çš„ä¿¡æ¯ï¼Œæ‰å¥½è¿›è¡Œéå†æ±‚å’Œæ“ä½œå¯¹å§~

**ç™¾ä½** ï¼šç»“ç‚¹æ·±åº¦ï¼Œ**åä½**ï¼šç»“ç‚¹ä½ç½®ï¼Œ**ä¸ªä½**ï¼šç»“ç‚¹å€¼

ä»¥ä¸‹é¢è¿™é¢—æ ‘ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹æ€ä¹ˆè®¡ç®—è¿™äº›ä¿¡æ¯ï¼š
![c2bf9ffc3a386889372088d43baaff2.jpg](https://pic.leetcode-cn.com/1640747397-FANCJM-c2bf9ffc3a386889372088d43baaff2.jpg)
å¯¹äºç»“ç‚¹`3`ï¼Œå¯¹åº”ä¸‰ä½æ•°`113`:
> **æ·±åº¦** : 113 / 100 = 1
> **ä½ç½®** : 113 / 10 = 11, 11 % 10 = 1
> **ç»“ç‚¹å€¼**ï¼š113 % 10 = 3

**æŠ½è±¡**å‡ºæ¥ï¼Œ å¯¹äºç»“ç‚¹`c`, ä¸‰ä½æ•°`abc`çš„è®¡ç®—å…¬å¼ï¼š
> **æ·±åº¦ï¼š** abc / 100 = a
> **ä½ç½®ï¼š** abc / 10 = ab, ab %10 = b
> **èŠ‚ç‚¹å€¼ï¼š** abc % 10 = c

è¿™ä¸‹æˆ‘ä»¬å°±èƒ½æŠŠä¿¡æ¯é€šè¿‡ç®€å•çš„è®¡ç®—å…¨éƒ¨å¾—åˆ°äº†ã€‚

# æ€ä¹ˆæ±‚å’Œ

å¦‚æœç»™ä¸€é¢—æ­£å¸¸çš„äºŒå‰æ ‘ï¼Œé‚£ä¹ˆä½ è‚¯å®šçŸ¥é“è¦é€šè¿‡**éå†**æ±‚å’Œã€‚
é‚£ä¹ˆå¯¹äºè¿™é¢—ä¹Ÿæ˜¯**ä¸€æ ·**ï¼Œæˆ‘ä»¬ä¹Ÿé€šè¿‡éå†æ±‚å’Œã€‚

**éå†çš„å…³é”®åœ¨äºï¼Œå¯¹äºå½“å‰éå†åˆ°çš„ç»“ç‚¹ï¼Œæˆ‘ä»¬è¦çŸ¥é“å®ƒå·¦å³å­æ ‘çš„ä¿¡æ¯ã€‚**

å¦‚æœæ˜¯ä¸€é¢—`TreeNode`è¡¨ç¤ºçš„æ ‘ï¼Œé‚£ä½ å¾ˆå®¹æ˜“å°±å¯ä»¥éå†å®ƒçš„`left`å’Œ`right`, ä»è€Œæ±‚è§£ã€‚
å¯¹äºæœ¬é¢˜çš„æ ‘ï¼Œæˆ‘ä»¬å·²çŸ¥äº†**æ·±åº¦**å’Œ**ä½ç½®**ï¼Œé‚£ä¹ˆèƒ½å¦é€šè¿‡è¿™ä¸¤ä¸ªä¿¡æ¯æ¥å¾—åˆ°å·¦å³å­æ ‘çš„ä¿¡æ¯å‘¢ï¼Ÿ

**ä¸å¦¨ä»¥ä¾‹å­æ¥è§£é‡Šï¼š**
![7e166da9428000bd824a759deddc6e0.jpg](https://pic.leetcode-cn.com/1640748420-Dcgtjr-7e166da9428000bd824a759deddc6e0.jpg)

å¯¹äºå›¾ä¸­çš„ç»“ç‚¹`a`æ¥è¯´ï¼Œæˆ‘ä»¬èƒ½æ±‚å‡ºå®ƒçš„ã€ä½ç½®=1ã€‘ï¼Œã€æ·±åº¦=1ã€‘ï¼Œé‚£ä¹ˆå¯¹äº`b`å’Œ`c`æ¥è¯´ï¼Œä»–ä»¬çš„ä½ç½®å’Œæ·±åº¦å¯ä»¥è¿™ä¹ˆç®—ï¼Œè®°ä½ç½®ä¸º $pos$ï¼Œæ·±åº¦ä¸º $depth$ï¼š
`b`çš„æ·±åº¦ï¼š$depth_b$ = $depth_a + 1$ = **2**
`b`çš„ä½ç½®ï¼š$pos_b = pos_a * 2 - 1$ = **1** 
é‚£ä¹ˆ`c`ä½œä¸º`a`çš„å³å­æ ‘ï¼Œæ·±åº¦è‡ªç„¶å°±ç­‰äºå·¦å­æ ‘`b`çš„æ·±åº¦ï¼Œä½ç½®å°±ç­‰äºå·¦å­æ ‘`b`çš„ä½ç½®**åŠ ä¸€**ã€‚
å…¶ä»–ç»“ç‚¹åŒç†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±ç®—ä¸€ç®—ï¼Œç†è§£ä¸€ä¸‹è¿™ä¸ªå…¬å¼ã€‚

å¥½çš„ï¼Œå¾—åˆ°äº†æ·±åº¦çš„è®¡ç®—å…¬å¼ï¼Œ**æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½çŸ¥é“`113`çš„å·¦å³å­æ ‘æ˜¯`215`å’Œ`221`å‘¢ï¼Ÿ**
![c2bf9ffc3a386889372088d43baaff2.jpg](https://pic.leetcode-cn.com/1640747397-FANCJM-c2bf9ffc3a386889372088d43baaff2.jpg)
è¿™é‡Œéœ€è¦æŠ›å¼€å€¼ï¼Œåªçœ‹å‰ä¸¤ä½ï¼Œ**é‚£ä¹ˆä¸å¦¨æŠŠä¸‰ä½æ•°æ•´ä½“éƒ½é™¤ä»¥10ã€‚**
æ­¤æ—¶çš„æ•°ç»„ä¸º`[11,21,22]`ï¼Œå½¢è±¡çš„è¡¨ç¤ºä¸º`depthPos`ã€‚

é‚£ä¹ˆåˆ©ç”¨ä¸Šé¢çš„æ¨å¯¼å…¬å¼ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºç»“ç‚¹`5`çš„æ·±åº¦æ˜¯`2`,ä½ç½®æ˜¯`1`ï¼Œé‚£ä¹ˆ`depthPos`å°±å¯ä»¥è¡¨ç¤ºä¸º`depthPos = depth * 10 + pos`,`5`å¯¹åº”çš„`21`å°±ç­‰äº`2 * 10 + 1 = 21`ã€‚

è¿™æ ·ä¸€æ¥ï¼Œé€šè¿‡ä¸€ä¸ªç»“ç‚¹çš„**æ·±åº¦å’Œä½ç½®ä¿¡æ¯**,æˆ‘ä»¬å°±èƒ½è®¡ç®—å‡ºå®ƒå·¦å³å­æ ‘çš„**æ•°å­—è¡¨ç¤º**.

ç¦»æ±‚è§£åªå·®ä¸€æ­¥äº†ï¼Œå°±æ˜¯æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å½“å‰ç»“ç‚¹æ˜¯å¶å­èŠ‚ç‚¹å‘¢ï¼Ÿè¿™é‡Œéœ€è¦åˆ©ç”¨ä¸€ä¸‹**å“ˆå¸Œè¡¨**ã€‚å“ˆå¸Œè¡¨çš„å®šä¹‰å¾ˆç®€å•ï¼Œæˆ‘ä»¬æŠŠä¸‰ä½æ•°æ‹†å¼€ï¼Œç”¨`Key`ä¿å­˜ä¹‹å‰è®¡ç®—çš„`depthPos`ï¼Œvalueä¿å­˜ç»“ç‚¹å€¼`nodeVal`ï¼š
> Map:<depthPos, val>

æˆ‘ä»¬ä¸€å¼€å§‹å…ˆæŠŠæ‰€æœ‰ç»“ç‚¹çš„æ·±åº¦ä½ç½®`depthPos`å’Œå€¼`nodeVal`è®¡ç®—å‡ºæ¥ï¼Œæ”¾è¿›å“ˆå¸Œè¡¨ï¼Œç„¶ååœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½“å‰ç»“ç‚¹çš„`depthPos`ä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¯´æ˜è¿™é¢—æ ‘ä¸­çš„è¯¥**æ·±åº¦ä½ç½®æ²¡æœ‰ç»“ç‚¹**ã€‚

é‚£ä¹ˆå°±å¯ä»¥æ„‰å¿«çš„å†™ä»£ç äº†ã€‚

# é¢˜è§£ä»£ç 

```java []
    Map<Integer, Integer> map;// è®°å½•æ·±åº¦ä½ç½®å’Œå€¼çš„å“ˆå¸Œè¡¨
    int allSum = 0;//è®°å½•æ€»è·¯å¾„å’Œ

    public int pathSum(int[] nums) {
        map = new HashMap<>();
        for(int num : nums){ // æŠŠdepthPos å’Œ nodeValæ”¾è¿›å“ˆå¸Œè¡¨
            map.put(num / 10, num % 10);
        }
        traverse(nums[0] / 10, 0); // ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ±‚å’Œ
        return allSum;
    }

    void traverse(int dp, int sum){
        if(!map.containsKey(dp)) return; // å¦‚æœæ²¡æœ‰è¿™æ ·çš„ä¸€ä¸ªç»“ç‚¹ï¼Œå°±è¿”å›ã€‚
        sum += map.get(dp); // å–å‡ºç»“ç‚¹å€¼è¿›è¡Œè®¡ç®—

        int depth = dp / 10, // è®¡ç®—æ·±åº¦
            pos = dp % 10; // è®¡ç®—ä½ç½®
        int left = (depth + 1) * 10 + 2 * pos - 1; // è®¡ç®—å·¦èŠ‚ç‚¹çš„depthPos
        int right = left + 1;
        // å¦‚æœå½“å‰ç»“ç‚¹æ²¡æœ‰å·¦å³å­æ ‘ï¼Œé‚£ä¹ˆå½“å‰ç»“ç‚¹ä¸ºå¶å­ï¼Œç´¯è®¡æ€»å’Œ
        if(!map.containsKey(left) && !map.containsKey(right)){
            allSum += sum;
        }else{ // å¦åˆ™é€’å½’å·¦å³å­æ ‘
            traverse(left, sum);
            traverse(right, sum);
        }
    }
```
å¦‚æœåœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…ä½ æœ‰æ›´å¥½çš„æ€è·¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸ªé¢˜è§£æœ‰ç¼˜å†è§~

ãƒ¾(â€¢Ï‰â€¢`)o
# 3.Java ä½¿ç”¨Mapå’Œé€’å½’
**æˆ‘çš„[leetcodeè§£é¢˜é›†](https://github.com/JuiceZhou/Leetcode)ï¼Œæ±‚å°æ˜Ÿæ˜Ÿå‘€(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§**

æ€è·¯ï¼š

ç”±é¢˜æ„å¯çŸ¥ï¼Œå¯ä»¥ä»åè¿›åˆ¶ä¸­è·å–ä¸‰ä¸ªä¿¡æ¯ï¼šæ·±åº¦dã€æ¯å±‚ä½ç½®pã€èŠ‚ç‚¹å€¼vã€‚å¯¹äºä¸€ä¸ªæ»¡äºŒå‰æ ‘ï¼Œå¦‚æœå¯¹æ¯å±‚æ¯ä¸ªèŠ‚ç‚¹ä»å·¦åˆ°å³å¼€å§‹ç¼–å·ï¼ˆä»1å¼€å§‹ï¼‰ï¼Œ å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ç¼–å·ä¸ºkï¼Œåˆ™çˆ¶èŠ‚ç‚¹ä¸ºk/2ï¼Œä¸¤ä¸ªå­èŠ‚ç‚¹ä¸º2kï¼Œ2k+1ã€‚
![å›¾ç‰‡.png](https://pic.leetcode-cn.com/464153b9ac951a11f80ed157e40fa06f5d29ae72219c028bea4a45f8bf4fd255-%E5%9B%BE%E7%89%87.png)


æˆ‘ä»¬å¯ä»¥æ ¹æ®åè¿›åˆ¶ä¸­ç»™å‡ºçš„ä¿¡æ¯å°†å½“å‰èŠ‚ç‚¹è½¬æ¢ä¸ºç¼–å·ï¼Œä½¿ç”¨Mapä¿å­˜èŠ‚ç‚¹ç¼–å·å’ŒèŠ‚ç‚¹å€¼ã€‚ ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼ˆå³ä½ç½®ä¸º1çš„å…ƒç´ ï¼‰ï¼Œæ¯æ¬¡é€’å½’ç´¯åŠ å½“å‰èŠ‚ç‚¹å€¼ï¼Œå½“kèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸å­˜åœ¨äºmapä¸­ï¼ˆå³ä½ç½®ä¸º2kå’Œ2k+1çš„å…ƒç´ ï¼‰ï¼Œè¡¨ç¤ºåˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œåˆ™å°†ç´¯åŠ å€¼åŠ å…¥å…¨å±€å˜é‡ç»“æœä¸­ã€‚å¦‚æœæœªåˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼ˆå³mapä¸­è¿˜æœ‰2kæˆ–2k+1å…ƒç´ ï¼‰ï¼Œç»§ç»­éå†ã€‚è¿™é‡Œæ³¨æ„æ¯æ¬¡éå†å®Œéœ€è¦å°†å½“å‰èŠ‚ç‚¹å€¼å›é€€ã€‚


```
class Solution {
    int res = 0, curVal = 0;

    public int pathSum(int[] nums) {
        if (nums.length == 0) return 0;
        Map<Integer, Integer> map = new HashMap<>();
        for (int num : nums) {
            int depth = num / 100;
            int pos = num / 10 % 10;
            int val = num % 10;
            int code = (int) Math.pow(2, depth - 1) + pos - 1;
            map.put(code, val);
        }
        //é€’å½’
        helper(map, 1);
        return res;
    }

    private void helper(Map<Integer, Integer> map, int index) {
        if (!map.containsKey(index)) return;
        curVal += map.get(index);
        //åˆ¤æ–­æ˜¯å¦åˆ°è¾¾å¶å­èŠ‚ç‚¹
        //åˆ°è¾¾
        if (!map.containsKey(index * 2) && !map.containsKey(index * 2 + 1)) {
            res += curVal;
        }
        //æœªåˆ°è¾¾
        if (map.containsKey(index * 2)) {
            helper(map, index * 2);
        }
        if (map.containsKey(index * 2 + 1)) {
            helper(map, index * 2 + 1);
        }
        //å›é€€
        curVal -= map.get(index);
    }
}
```

# 4.é€’å½’100%
### è§£é¢˜æ€è·¯
æ­¤å¤„æ’°å†™è§£é¢˜æ€è·¯

### ä»£ç 

```java
class Solution {

    public  int length;//é•¿åº¦
    public int max;//æœ€å¤§å€¼
    //123
    public int getlevel(int node){ //1
        return node/100;
    }
    public int getorder(int node){ //2
        return (node%100)/10;//
    }
    public int getvalue(int node){//3
        return node%10;
    }

    //æ·±åº¦éå†
    public  int DFS(int sum,int index,int[]nums){
        if(index==length){
            return sum;//æ€»å’Œ
        }
        int cur=nums[index];//å–å¾—å½“å‰æ•°æ®
        int o=getorder(cur);//åä½æ•°2
        int v=getvalue(cur);//ä¸ªä½æ•°3

        sum+=v;//å åŠ 
        int subsum=0;//ç›¸å‡çš„æ•°æ®
        for(int i=index+1;i<length;i++){
            int next=nums[i];//å–å¾—å½“å‰æ˜¯æŠ¤å…·
            if(getlevel(next)==getlevel(cur)+1){
                int order=getorder(next);
                if(order==o*2 || order==o*2-1){
                    subsum+=DFS(sum,i,nums);//é€’å½’è®¡ç®—
                }
            }
        }
        return subsum==0?sum:subsum;//å åŠ 









    }
    public int pathSum(int[] nums) {
        this.length=nums.length;
        this.max=getlevel(nums[length-1]);//æœ€å¤§æ·±åº¦
        return DFS(0,0,nums);//é€’å½’


    }




}
```
