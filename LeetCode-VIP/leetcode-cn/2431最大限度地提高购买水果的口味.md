# 2431æœ€å¤§é™åº¦åœ°æé«˜è´­ä¹°æ°´æœçš„å£å‘³
<p>ä½ æœ‰ä¸¤ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ <code>price</code> å’Œ <code>tastiness</code>ï¼Œä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦éƒ½æ˜¯ <code>n</code>ã€‚åŒæ—¶ç»™ä½ ä¸¤ä¸ªéè´Ÿæ•´æ•° <code>maxAmount</code> å’Œ <code>maxCoupons</code>ã€‚</p>

<p data-group="1-1">å¯¹äºèŒƒå›´ <code>[0, n - 1]</code>&nbsp;ä¸­çš„æ¯ä¸€ä¸ªæ•´æ•° <code>i</code>:</p>

<ul>
	<li>
	<p data-group="1-1"><code>price[i]</code>&nbsp;æè¿°äº†ç¬¬ <code>i</code> ä¸ªæ°´æœçš„ä»·æ ¼ã€‚</p>
	</li>
	<li><code>tastiness[i]</code> æè¿°äº†ç¬¬ <code>i</code> ä¸ªæ°´æœçš„å‘³é“ã€‚</li>
</ul>

<p>ä½ æƒ³è´­ä¹°ä¸€äº›æ°´æœï¼Œè¿™æ ·æ€»çš„å‘³é“æ˜¯æœ€å¤§çš„ï¼Œæ€»ä»·ä¸è¶…è¿‡ <code>maxAmount</code>ã€‚</p>

<p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥ç”¨ä¼˜æƒ åˆ¸ä»¥&nbsp;<strong>åŠä»·&nbsp;</strong>è´­ä¹°æ°´æœ (å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°)ã€‚æ‚¨æœ€å¤šå¯ä»¥ä½¿ç”¨ <code>maxCoupons</code>&nbsp;æ¬¡è¯¥ä¼˜æƒ åˆ¸ã€‚</p>

<p>è¿”å›å¯è´­ä¹°çš„æœ€å¤§æ€»å£å‘³ã€‚</p>

<p><strong>æ³¨æ„:</strong></p>

<ul>
	<li>æ¯ç§æ°´æœæœ€å¤šåªèƒ½è´­ä¹°ä¸€æ¬¡ã€‚</li>
	<li>ä¸€äº›æ°´æœä½ æœ€å¤šåªèƒ½ç”¨ä¸€æ¬¡æŠ˜ä»·åˆ¸ã€‚</li>
</ul>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> price = [10,20,20], tastiness = [5,8,8], maxAmount = 20, maxCoupons = 1
<strong>è¾“å‡º:</strong> 13
<strong>è§£é‡Š:</strong> å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥è¾¾åˆ°æ€»å£å‘³:
- æ— ä¼˜æƒ åˆ¸ä¹°ç¬¬ä¸€ä¸ªæ°´æœï¼Œæ€»ä»·= 0 + 10ï¼Œæ€»å£å‘³= 0 + 5ã€‚
- ç”¨ä¼˜æƒ åˆ¸ä¹°ç¬¬äºŒä¸ªæ°´æœï¼Œæ€»ä»·= 10 + 10ï¼Œæ€»å£å‘³= 5 + 8ã€‚
- ä¸è´­ä¹°ç¬¬ä¸‰ä¸ªæ°´æœï¼Œæ€»ä»·= 20ï¼Œæ€»å£å‘³= 13ã€‚
å¯ä»¥è¯æ˜ 13 æ˜¯æ‰€èƒ½å¾—åˆ°çš„æœ€å¤§æ€»å£å‘³ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> price = [10,15,7], tastiness = [5,8,20], maxAmount = 10, maxCoupons = 2
<strong>è¾“å‡º:</strong> 28
<strong>è§£é‡Š:</strong> å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•ä½¿æ€»å£å‘³è¾¾åˆ° 20:
- ä¸ä¹°ç¬¬ä¸€ä¸ªæ°´æœï¼Œè¿™æ ·æ€»ä»·= 0ï¼Œæ€»å£å‘³= 0ã€‚
- ç”¨ä¼˜æƒ åˆ¸ä¹°ç¬¬äºŒä¸ªæ°´æœï¼Œæ€»ä»·= 0 + 7ï¼Œæ€»å£å‘³= 0 + 8ã€‚
- ç”¨ä¼˜æƒ åˆ¸ä¹°ç¬¬ä¸‰ä¸ªæ°´æœï¼Œæ€»ä»·= 7 + 3ï¼Œæ€»å£å‘³= 8 + 20ã€‚
å¯ä»¥è¯æ˜ï¼Œ28 æ˜¯æ‰€èƒ½å¾—åˆ°çš„æœ€å¤§æ€»å£å‘³ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤º:</strong></p>

<ul>
	<li><code>n == price.length == tastiness.length</code></li>
	<li><code>1 &lt;= n &lt;= 100</code></li>
	<li><code>0 &lt;= price[i], tastiness[i], maxAmount &lt;= 1000</code></li>
	<li><code>0 &lt;= maxCoupons &lt;= 5</code></li>
</ul>
































# è§£é¢˜:
# 1.Pythonï¼ŒåŒ100%ï¼Œæ»šåŠ¨æ•°ç»„DP
### æ—¶ç©ºæ•ˆç‡

```
æ‰§è¡Œç”¨æ—¶ï¼š336 ms, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
å†…å­˜æ¶ˆè€—ï¼š15.4 MB, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
```

### è§£é¢˜æ€è·¯

æ€è·¯å¾ˆç®€å•ï¼Œç”¨ dp\[k]\[i]\[j] è¡¨ç¤ºåˆ°æˆªè‡³ä¸‹æ ‡ k çš„æ°´æœï¼ŒèŠ±è´¹ i å¼ ä¼˜æƒ åˆ¸ä»¥åŠ j å…ƒé’±çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è·å¾—çš„æœ€å¤§ç”œåº¦ã€‚

å‡è®¾ä¸‹æ ‡ä¸º k çš„æ°´æœå”®ä»·ä¸º pï¼Œç”œåº¦ä¸º tï¼Œé‚£ä¹ˆ dp\[k]\[i]\[j] å¯ä»¥ä» 3 ç§æƒ…å†µè½¬åŒ–è€Œæ¥ï¼š

1.  ***ä¸ä¹°*** ä¸‹æ ‡ä¸º k çš„æ°´æœï¼Œé‚£ä¹ˆæˆªè‡³ä¸‹æ ‡ä¸º k-1 çš„æ°´æœï¼Œå·²èŠ± i å¼ ä»£é‡‘åˆ¸ï¼Œå·²èŠ± j å…ƒï¼Œå³ dp\[k]\[i]\[j]

2.  ***ä¹°*** ä¸‹æ ‡ä¸º k çš„æ°´æœï¼Œé‚£ä¹ˆæˆªè‡³ä¸‹æ ‡ä¸º k-1 çš„æ°´æœï¼Œå·²èŠ± i å¼ ä»£é‡‘åˆ¸ï¼Œå·²èŠ± j-p å…ƒï¼Œå³ dp\[k-1]\[i]\[j-p]

3.  ***ä¹°*** ä¸‹æ ‡ä¸º k çš„æ°´æœï¼Œé‚£ä¹ˆæˆªè‡³ä¸‹æ ‡ä¸º k-1 çš„æ°´æœï¼Œå·²èŠ± i-1 å¼ ä»£é‡‘åˆ¸ï¼Œå·²èŠ± j-(p//2) å…ƒ dp\[k-1]\[i-1]\[j-(p//2)]

é‚£ä¹ˆ dp\[k]\[i]\[j] å°±åº”è¯¥æ˜¯ä¸Šè¿°ä¸‰è€…ä¸­çš„æœ€å¤§å€¼ã€‚

ç”±äº dp\[k]\[Â·]\[Â·] ä»…ä¸ dp\[k-1]\[Â·]\[Â·] æœ‰å…³ï¼Œæ•…å¯ç”¨æ»šåŠ¨æ•°ç»„æ–¹æ¡ˆå‹ç¼©æ‰ç¬¬ä¸€ç»´ã€‚

å…·ä½“ç»†èŠ‚å·²åœ¨ä»£ç æ³¨é‡Šä¸­è¿›è¡Œéå¸¸è¯¦ç»†çš„è¯´æ˜ã€‚

### ä»£ç 

```python3
class Solution:
    def maxTastiness(self, price: List[int], tastiness: List[int], maxAmount: int, maxCoupons: int) -> int:
        # dp[i][j]è®°å½•ä½¿ç”¨iå¼ ä¼˜æƒ åˆ¸åŠjå…ƒé’±æ—¶å¯ä»¥è·å¾—çš„æœ€å¤§ç”œåº¦å€¼ï¼Œå½“è®°å½•ä¸º-math.infæ—¶è¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„ç»„åˆ
        dp = [[-math.inf] * (maxAmount + 1) for _ in range(maxCoupons + 1)]
        # ä¸€å—é’±ä¹Ÿä¸èŠ±ï¼Œä¸€å¼ åˆ¸ä¹Ÿä¸ç”¨æ—¶æ˜¾ç„¶è·å¾—çš„ç”œåº¦å€¼ä¸º0
        dp[0][0] = 0
        # éå†æ‰€æœ‰price, tastinesså¯¹
        for p, t in zip(price, tastiness):
            # å¦‚æœå½“å‰ç”œåº¦å€¼ä¸º0ï¼Œé‚£ä¹ˆèŠ±é’±ä¹°è¯¥æ°´æœæ— æ„ä¹‰
            if t == 0:
                continue

            # å¦‚æœå½“å‰æ°´æœçš„åŠä»·éƒ½é«˜äºæ€»é‡‘é¢ï¼Œåˆ™æ˜¾ç„¶æ— æ³•ä¹°ä¸‹å½“å‰æ°´æœ
            p_ = p >> 1
            if p_ > maxAmount:
                continue

            # ç”¨ä¸Šä¸€é˜¶æ®µdpå€¼åˆå§‹åŒ–ä¸‹ä¸€é˜¶æ®µçš„dpå€¼
            tmp_dp = [dp[i].copy() for i in range(maxCoupons + 1)]

            # å…ˆè€ƒè™‘dpè®°å½•ä¸­å·²ç»ç”¨å®Œäº†æ‰€æœ‰ä¼˜æƒ åˆ¸çš„æƒ…å†µï¼Œå³dpçš„æœ€åä¸€è¡Œdp[maxCoupons]ï¼Œæˆ–dp[-1]
            # éå†æ‰€æœ‰å·²ç»ä½¿ç”¨çš„é‡‘é¢j
            for j in range(maxAmount + 1):
                # è‹¥å½“å‰çŠ¶æ€ä¸åˆæ³•ï¼Œè·³è¿‡
                if dp[-1][j] == -math.inf:
                    continue
                # è‹¥å·²èŠ±é‡‘é¢åŠ ä¸Šå½“å‰æ°´æœé‡‘é¢è¶…è¿‡äº†æ€»é‡‘é¢ï¼Œåˆ™åç»­çš„jä¹Ÿä¼šè®©j+pè¶…å‡ºæ€»é‡‘é¢ï¼Œå¯ç›´æ¥break
                if j + p > maxAmount:
                    break
                # ç”¨èŠ±è´¹jå…ƒé’±è·å¾—çš„æœ€å¤§ç”œåº¦åŠ ä¸Šå½“å‰æ°´æœçš„ç”œåº¦tï¼Œæ¥æ›´æ–°èŠ±è´¹j+på…ƒå¯è·å¾—çš„æœ€å¤§ç”œåº¦
                tmp = dp[-1][j] + t
                if tmp > tmp_dp[-1][j + p]:
                    tmp_dp[-1][j + p] = tmp

            # å½“å·²ç”¨ä¼˜æƒ åˆ¸ä¸åˆ°æ€»ä¼˜æƒ åˆ¸æ•°é‡æ—¶ï¼Œå¯ä»¥è€ƒè™‘å¯¹å½“å‰æ°´æœå†ç”¨ä¸€å¼ ä»£é‡‘åˆ¸ï¼Œæ­¤æ—¶éå†æ‰€æœ‰å°äºmaxCouponsçš„i
            for i in range(maxCoupons):
                # éå†æ‰€æœ‰å·²èŠ±è´¹çš„é‡‘é¢j
                for j in range(maxAmount + 1):
                    # è‹¥ä¸å­˜åœ¨å·²ç”¨iå¼ ä¼˜æƒ åˆ¸ä¸”èŠ±è´¹æ€»é‡‘é¢ä¸ºjçš„æ–¹æ¡ˆï¼Œåˆ™è·³è¿‡
                    if dp[i][j] == -math.inf:
                        continue
                    # è‹¥å·²èŠ±é‡‘é¢åŠ ä¸Šå½“å‰æ°´æœçš„åŠä»·éƒ½è¶…è¿‡äº†æ€»é‡‘é¢ï¼Œåˆ™åœ¨å·²èŠ±è´¹é‡‘é¢å¤§äºjå…ƒçš„æƒ…å†µä¸‹ï¼Œ
                    # æ— è®ºåç»­æ˜¯å¦ä½¿ç”¨ä»£é‡‘åˆ¸éƒ½æ— æ³•è´­å…¥å½“å‰æ°´æœï¼Œæ•…å¯break
                    if j + p_ > maxAmount:
                        break
                    # ç”¨å·²èŠ±iå¼ ä¼˜æƒ åˆ¸å’Œjå…ƒå¯è·å¾—çš„æœ€å¤§ç”œåº¦åŠ ä¸Šå½“å‰æ°´æœçš„ç”œåº¦æ¥æ›´æ–°
                    tmp = dp[i][j] + t
                    # è‹¥å®ƒæ¯”å½“å‰è®°å½•çš„å¤šèŠ±ä¸€å¼ ä¼˜æƒ åˆ¸ä¸”å¤šèŠ±å½“å‰æ°´æœçš„åŠä»·è·å¾—çš„ç”œåº¦å¤§ï¼Œåˆ™æ›´æ–°
                    if tmp > tmp_dp[i + 1][j + p_]:
                        tmp_dp[i + 1][j + p_] = tmp
                    # è‹¥j+pæœªè¶…è¿‡æ€»é‡‘é¢ï¼Œåˆ™å¯åœ¨ä¸èŠ±è´¹é¢å¤–ä¼˜æƒ åˆ¸çš„æƒ…å†µä¸‹è´­å…¥å½“å‰æ°´æœ
                    if j + p <= maxAmount and tmp > tmp_dp[i][j + p]:
                        tmp_dp[i][j + p] = tmp

            dp = tmp_dp

        return max(max(rec) for rec in dp)
```

# 2.çˆ†æœå°±å®Œäº‹äº†
### è§£é¢˜æ€è·¯

### ä»£ç 

```python3
class Solution:
    def maxTastiness(self, price: List[int], tastiness: List[int], maxAmount: int, maxCoupons: int) -> int:
        n=len(price)
        @functools.lru_cache(None)
        def dfs(i,money,coupon):
            if i==n:
                return 0
            res=0
            if money>=price[i]:
                res=max(res,tastiness[i]+dfs(i+1,money-price[i],coupon))
            if money>=price[i]//2 and coupon>0:
                res=max(res,tastiness[i]+dfs(i+1,money-price[i]//2,coupon-1))
            res=max(res,dfs(i+1,money,coupon))
            return res
        return dfs(0,maxAmount,maxCoupons)
        



```
# 3.ã€daydayUpppğŸˆã€‘è®°å¿†åŒ–æœç´¢
> Problem: [2431. Maximize Total Tastiness of Purchased Fruits](https://leetcode.cn/problems/maximize-total-tastiness-of-purchased-fruits/description/)

[TOC]

# æ€è·¯

ç”¨ **è®°å¿†åŒ–æœç´¢** æ¥è®¡ç®—æ¯ä¸€ä¸ªçŠ¶æ€å³å¯ã€‚å…·ä½“çœ‹ä»£ç æ³¨é‡Šå®ç°å³å¯ï¼Œæœ‰ä»»ä½•ç–‘é—®æ¬¢è¿è¯„è®ºåŒºæŒ‡å‡ºã€‚ğŸ¬

# å¤æ‚åº¦
- æ—¶é—´å¤æ‚åº¦: $O(n)$ï¼Œå› ä¸ºå¹¶ä¸æ˜¯å…¨éƒ¨çš„çŠ¶æ€éƒ½èƒ½è¢«æ±‚å¾—ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€åªä¼šå¾€ä¸‹æœ‰ä¸‰ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥æœ€åçš„å¤æ‚åº¦æ˜¯ $O(n)$

# Code
```cpp
class Solution {
public:
    int dp[105][1005][6];
    int dfs(vector<int>& price, vector<int>& tastiness, int curp, int curAmount, int curCoupons) {
        if (dp[curp][curAmount][curCoupons] != -1) return dp[curp][curAmount][curCoupons];
        if (curp == price.size()) return 0;
        int res = dfs(price, tastiness, curp + 1, curAmount, curCoupons); // è¯¥é£Ÿç‰©ä¸ä¹°
        if (curCoupons && price[curp] / 2 <= curAmount) { // è¯¥é£Ÿç‰©ä¹°ï¼Œä¸”å¯ä»¥ç”¨æ‰“æŠ˜
            res = max(res, tastiness[curp] + dfs(price, tastiness, curp + 1, curAmount - price[curp] / 2, curCoupons - 1));
        }
        if (price[curp] <= curAmount) res = max(res, tastiness[curp] + dfs(price, tastiness, curp + 1, curAmount - price[curp], curCoupons)); // è¯¥é£Ÿç‰©ä¹° ä¸ç”¨æ‰“æŠ˜
        dp[curp][curAmount][curCoupons] = res;
        return res;
    }
    int maxTastiness(vector<int>& price, vector<int>& tastiness, int maxAmount, int maxCoupons) {
        int n = price.size();
        for (int i = 0; i < n; ++i) {
            for (int j = 0; j <= maxAmount; ++j) {
                memset(dp[i][j], -1, sizeof dp[i][j]);
            }
        }
        return dfs(price, tastiness, 0, maxAmount, maxCoupons);
    }
};
```

# 4.äºŒç»´è´¹ç”¨èƒŒåŒ…
```
class Solution {
public:
    int maxTastiness(vector<int>& a, vector<int>& b, int m, int k) {
        int n = (int) a.size();
        vector f(m + 1, vector<int>(k + 1));
        for (int p = 0; p < n; p++) {
            int c = a[p], w = b[p], nc = c / 2;
            for (int i = m; i >= nc; i--) {
                for (int j = k; j >= 0; j--) {
                    if (i >= c) {
                        f[i][j] = max(f[i][j], f[i - c][j] + w);
                    }
                    if (j) {
                        f[i][j] = max(f[i][j], f[i - nc][j - 1] + w);
                    }
                }
            }
        }
        int ans = 0;
        for (auto &x: f) {
            for (auto &y: x) {
                ans = max(ans, y);
            }
        }
        return ans;
    }
};
```
