# 774æœ€å°åŒ–å»åŠ æ²¹ç«™çš„æœ€å¤§è·ç¦»
<p>æ•´æ•°æ•°ç»„ <code>stations</code> è¡¨ç¤º <strong>æ°´å¹³æ•°è½´</strong> ä¸Šå„ä¸ªåŠ æ²¹ç«™çš„ä½ç½®ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>k</code> ã€‚</p>

<p>è¯·ä½ åœ¨æ•°è½´ä¸Šå¢è®¾ <code>k</code> ä¸ªåŠ æ²¹ç«™ï¼Œæ–°å¢åŠ æ²¹ç«™å¯ä»¥ä½äº <strong>æ°´å¹³æ•°è½´</strong> ä¸Šçš„ä»»æ„ä½ç½®ï¼Œè€Œä¸å¿…æ”¾åœ¨æ•´æ•°ä½ç½®ä¸Šã€‚</p>

<p>è®¾ <code>penalty()</code> æ˜¯ï¼šå¢è®¾ <code>k</code> ä¸ªæ–°åŠ æ²¹ç«™åï¼Œ<strong>ç›¸é‚»</strong> ä¸¤ä¸ªåŠ æ²¹ç«™é—´çš„æœ€å¤§è·ç¦»ã€‚</p>
è¯·ä½ è¿”å›Â <code>penalty()</code><strong> </strong>å¯èƒ½çš„æœ€å°å€¼ã€‚ä¸å®é™…ç­”æ¡ˆè¯¯å·®åœ¨ <code>10<sup>-6</sup></code> èŒƒå›´å†…çš„ç­”æ¡ˆå°†è¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>stations = [1,2,3,4,5,6,7,8,9,10], k = 9
<strong>è¾“å‡ºï¼š</strong>0.50000
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>stations = [23,24,36,39,46,56,57,65,84,98], k = 1
<strong>è¾“å‡ºï¼š</strong>14.00000
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>10 <= stations.length <= 2000</code></li>
	<li><code>0 <= stations[i] <= 10<sup>8</sup></code></li>
	<li><code>stations</code> æŒ‰ <strong>ä¸¥æ ¼é€’å¢</strong> é¡ºåºæ’åˆ—</li>
	<li><code>1 <= k <= 10<sup>6</sup></code></li>
</ul>
































# è§£é¢˜:
# 1.æœ€å°åŒ–å»åŠ æ²¹ç«™çš„æœ€å¤§è·ç¦»
#### æ–¹æ³•ä¸€ï¼š åŠ¨æ€è§„åˆ’ ã€è¶…å†…å­˜ã€‘

**æ€è·¯**

å®šä¹‰ `dp[n][k]` è¡¨ç¤ºå¢åŠ  `k` ä¸ªåŠ æ²¹ç«™ä¹‹åå‰ `n` ä¸ªåŠ æ²¹ç«™ä¹‹é—´æœ€å°çš„æœ€å¤§è·ç¦»ã€‚

**æ€è·¯**

å®šä¹‰ç¬¬ `i` ä¸ªé—´éš”ä¸º `deltas[i] = stations[i+1] - stations[i]`ï¼Œç”¨é€’å½’æ¥è®¡ç®— dp[n+1][k]ã€‚å°† `x` ä¸ªåŠ æ²¹ç«™å¹³å‡æ”¾åœ¨ç¬¬ `n+1` ä¸ªé—´éš”ä¹‹é—´å¯ä»¥å¾—åˆ°çš„é—´éš”è·ç¦»ä¸º `deltas[n+1] / (x+1)`ï¼Œå…¨å±€æœ€å°çš„æœ€å¤§è·ç¦»å¯ä»¥é€šè¿‡å’Œ `dp[n][k-x]` æ¯”è¾ƒæ¥å¾—åˆ°ã€‚ç”¨åŠ¨æ€è§„åˆ’æ¥å®ç°è¿™ä¸ªé€’å½’æ–¹æ³•ã€‚

```java [solution1-Java]
class Solution {
    public double minmaxGasDist(int[] stations, int K) {
        int N = stations.length;
        double[] deltas = new double[N-1];
        for (int i = 0; i < N-1; ++i)
            deltas[i] = stations[i+1] - stations[i];

        double[][] dp = new double[N-1][K+1];
        //dp[i][j] = answer for deltas[:i+1] when adding j gas stations
        for (int i = 0; i <= K; ++i)
            dp[0][i] = deltas[0] / (i+1);

        for (int p = 1; p < N-1; ++p)
            for (int k = 0; k <= K; ++k) {
                double bns = 999999999;
                for (int x = 0; x <= k; ++x)
                    bns = Math.min(bns, Math.max(deltas[p] / (x+1), dp[p-1][k-x]));
                dp[p][k] = bns;
            }

        return dp[N-2][K];
    }
}
```

```python [solution1-Python]
class Solution(object):
    def minmaxGasDist(self, stations, K):
        N = len(stations)
        deltas = [stations[i+1] - stations[i] for i in xrange(N-1)]
        dp = [[0.0] * (K+1) for _ in xrange(N-1)]
        #dp[i][j] = answer for deltas[:i+1] when adding j gas stations
        for i in xrange(K+1):
            dp[0][i] = deltas[0] / float(i + 1)

        for p in xrange(1, N-1):
            for k in xrange(K+1):
                dp[p][k] = min(max(deltas[p] / float(x+1), dp[p-1][k-x])
                               for x in xrange(k+1))

        return dp[-1][K]
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N K^2)$ï¼Œå…¶ä¸­ $N$ æ˜¯ `stations` çš„é•¿åº¦ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(N K)$ï¼Œå…¶ä¸º `dp` æ•°ç»„çš„å¤§å°ã€‚

#### æ–¹æ³•äºŒï¼š æš´åŠ›æ³• ã€è¶…æ—¶ã€‘

**æ€è·¯**

å’Œæ–¹æ³•ä¸€ç›¸åŒï¼Œå…ˆè®¡ç®—ç›¸é‚»åŠ æ²¹ç«™ä¹‹é—´çš„é—´è·ï¼Œä¹‹åä¸æ–­å¾€æœ€å¤§é—´è·ä¸­æ–°å¢åŠ æ²¹ç«™ï¼Œç›´åˆ°åŠ æ»¡ `k` ä¸ªåŠ æ²¹ç«™ã€‚æ˜¾ç„¶è¿™ä¸ªè´ªå¿ƒç®—æ³•æ˜¯æ­£ç¡®çš„ï¼Œæ²¡æœ‰å…¶ä»–æ–¹æ³•èƒ½è¾¾åˆ°æ¯”è¿™ä¸ªæ–¹æ³•æ›´å°çš„æœ€å¤§é—´è·ã€‚

**ç®—æ³•**

ç”¨ `count[i]` è®°å½•ç¬¬ `i` ä¸ªé—´è·ä¹‹é—´æœ‰å¤šå°‘åŠ æ²¹ç«™ï¼Œä¹‹åæ¯æ¬¡æ‰¾æœ€å¤§é—´è·çš„æ—¶å€™æ¯”è¾ƒ `deltas[i] / count[i]`ã€‚

```java [solution2-Java]
class Solution {
    public double minmaxGasDist(int[] stations, int K) {
        int N = stations.length;
        double[] deltas = new double[N-1];
        for (int i = 0; i < N-1; ++i)
            deltas[i] = stations[i+1] - stations[i];

        int[] count = new int[N-1];
        Arrays.fill(count, 1);

        for (int k = 0; k < K; ++k) {
            // Find interval with largest part
            int best = 0;
            for (int i = 0; i < N-1; ++i)
                if (deltas[i] / count[i] > deltas[best] / count[best])
                    best = i;

            // Add gas station to best interval
            count[best]++;
        }

        double ans = 0;
        for (int i = 0; i < N-1; ++i)
            ans = Math.max(ans, deltas[i] / count[i]);

        return ans;
    }
}
```

```python [solution2-Python]
class Solution(object):
    def minmaxGasDist(self, stations, K):
        N = len(stations)
        deltas = [float(stations[i+1] - stations[i]) for i in xrange(N-1)]
        count = [1] * (N - 1)

        for _ in xrange(K):
            #Find interval with largest part
            best = 0
            for i, x in enumerate(deltas):
                if x / count[i] > deltas[best] / count[best]:
                    best = i

            #Add gas station to best interval
            count[best] += 1

        return max(x / count[i] for i, x in enumerate(deltas))
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N K)$ï¼Œå…¶ä¸­ $N$ æ˜¯ `stations` çš„é•¿åº¦ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸º `deltas` å’Œ `count` çš„å¤§å°ã€‚

#### æ–¹æ³•ä¸‰ï¼š å † ã€è¶…æ—¶ã€‘

**æ€è·¯**

åŒæ–¹æ³•äºŒç›¸åŒçš„æ€è·¯ï¼Œç”¨å †æ¥åŠ é€Ÿæ‰¾åˆ°æœ€å¤§é—´éš”çš„é€Ÿåº¦ã€‚

**ç®—æ³•**

åŒæ–¹æ³•äºŒç›¸åŒï¼Œä¸æ–­å¾€æœ€å¤§é—´è·ä¸­æ–°å¢åŠ æ²¹ç«™ï¼Œé‡å¤ `k` æ¬¡ã€‚ç”¨æœ€å¤§å †æ¥å®Œæˆæ‰¾æœ€å¤§é—´è·çš„æ“ä½œã€‚åœ¨ Python çš„å®ç°ä¸­ï¼Œç”¨åˆ°äº†è´Ÿä¼˜å…ˆçº§åœ¨æœ€å°å †ä¸­æ¨¡æ‹Ÿæœ€å¤§å †ã€‚

```java [solution3-Java]
class Solution {
    public double minmaxGasDist(int[] stations, int K) {
        int N = stations.length;
        PriorityQueue<int[]> pq = new PriorityQueue<int[]>((a, b) ->
            (double)b[0]/b[1] < (double)a[0]/a[1] ? -1 : 1);
        for (int i = 0; i < N-1; ++i)
            pq.add(new int[]{stations[i+1] - stations[i], 1});

        for (int k = 0; k < K; ++k) {
            int[] node = pq.poll();
            node[1]++;
            pq.add(node);
        }

        int[] node = pq.poll();
        return (double)node[0] / node[1];
    }
}
```

```python [solution3-Python]
class Solution(object):
    def minmaxGasDist(self, stations, K):
        pq = [] #(-part_length, original_length, num_parts)
        for i in xrange(len(stations) - 1):
            x, y = stations[i], stations[i+1]
            pq.append((x-y, y-x, 1))
        heapq.heapify(pq)

        for _ in xrange(K):
            negnext, orig, parts = heapq.heappop(pq)
            parts += 1
            heapq.heappush(pq, (-(orig / float(parts)), orig, parts))

        return -pq[0][0]
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(K \log N)$ï¼Œå…¶ä¸­ $N$ ä¸º `stations` çš„é•¿åº¦ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸º `deltas` å’Œ `count` çš„å¤§å°ã€‚

#### æ–¹æ³•å››ï¼š äºŒåˆ†æœç´¢ ã€é€šè¿‡ã€‘

**æ€è·¯**

å®šä¹‰ `possible(D)`ï¼š æœ‰ `k` ä¸ªåŠ æ²¹ç«™ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è®©æœ€å°çš„æœ€å¤§è·ç¦»å°äºç­‰äº `D`ï¼Ÿ è¿™ä¸ªé—®é¢˜çš„ç»“æœæ˜¯å•è°ƒçš„ï¼Œå› æ­¤å¯ä»¥ç”¨äºŒåˆ†æœç´¢æ¥æ‰¾åˆ°ç­”æ¡ˆ $D^{*}$ã€‚

**ç®—æ³•**

æ›´å‡†ç¡®ä¸€ç‚¹æ¥è¯´ï¼Œå‡è®¾ç­”æ¡ˆä¸º `D*`ï¼Œ å¯¹äº `d < D*`ï¼Œ`possible(d) = False`ï¼Œå¯¹äº`d > D*`ï¼Œ`possible(d) = True`ã€‚é’ˆå¯¹å•è°ƒé—®é¢˜çš„äºŒåˆ†æœç´¢æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„åšæ³•ï¼Œé‡ç‚¹æ˜¯ `possible(D)` çš„å®ç°ã€‚

å®šä¹‰ `X = stations[i+1] - stations[i]`ï¼Œæ­¤æ—¶éœ€è¦ $\lfloor \frac{X}{D} \rfloor$ ä¸ªåŠ æ²¹ç«™æ¥ä¿è¯æ¯ä¸ªé—´è·éƒ½å°äº `D`ï¼Œæ€»å…±éœ€è¦  $\sum_i \lfloor \frac{X_i}{D} \rfloor$ ä¸ªåŠ æ²¹ç«™ã€‚å¦‚æœè¿™ä¸ªæ•°ä¸è¶…è¿‡ `K`ï¼Œå°±å¯ä»¥åšåˆ°æœ€å¤§è·ç¦»ä¸è¶…è¿‡ `D`ã€‚

```java [solution4-Java]
class Solution {
    public double minmaxGasDist(int[] stations, int K) {
        double lo = 0, hi = 1e8;
        while (hi - lo > 1e-6) {
            double mi = (lo + hi) / 2.0;
            if (possible(mi, stations, K))
                hi = mi;
            else
                lo = mi;
        }
        return lo;
    }

    public boolean possible(double D, int[] stations, int K) {
        int used = 0;
        for (int i = 0; i < stations.length - 1; ++i)
            used += (int) ((stations[i+1] - stations[i]) / D);
        return used <= K;
    }
}
```

```python [solution4-Python]
class Solution(object):
    def minmaxGasDist(self, stations, K):
        def possible(D):
            return sum(int((stations[i+1] - stations[i]) / D)
                       for i in xrange(len(stations) - 1)) <= K

        lo, hi = 0, 10**8
        while hi - lo > 1e-6:
            mi = (lo + hi) / 2.0
            if possible(mi):
                hi = mi
            else:
                lo = mi
        return lo
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N \log W)$ï¼Œå…¶ä¸­ $N$ æ˜¯ `stations` çš„é•¿åº¦ï¼Œ$W = 10^{14}$ ä¸ºç­”æ¡ˆçš„èŒƒå›´ï¼ˆ$10^8$ é™¤ä»¥ç­”æ¡ˆçš„ç²¾åº¦ $10^{-6}$)ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚
# 2.è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾å˜å½¢
### è§£é¢˜æ€è·¯
æ­¤å¤„æ’°å†™è§£é¢˜æ€è·¯

### ä»£ç 

```java
class Solution {
    public double minmaxGasDist(int[] stations, int k) {
        int length=stations.length;//é•¿åº¦
        double low=0; //æœ€å°é•¿åº¦
        double high=0;//æœ€å¤§é•¿åº¦
        //[23,24,36,39,46,56,57,65,84,98]
        for(int i=1;i<length;i++){
            high=Math.max(high,stations[i]-stations[i-1]);//ä¿å­˜æœ€å¤§çš„å·®å€¼ 84-65=19
        }
        //ä¸å®é™…ç­”æ¡ˆè¯¯å·®åœ¨ 1e-6 èŒƒå›´å†…çš„ç­”æ¡ˆ
        while(high-low >1e-6){ //äºŒåˆ†æŸ¥æ‰¾
            double mid=(low+high)/2;//ä¸­é—´å€¼
            int add=0;
            for(int i=1;i<length;i++){
                add+=(int)((stations[i]-stations[i-1])/mid);//å¢åŠ çš„æ•°é‡
            }
            if(add<=k){
                high=mid;//å¤¹é€¼
            }else{//add>k
                low=mid; //å¤¹é€¼
            }

        }




        return low;//æœ€å°é•¿åº¦

    }
}
```
# 3.ã€äºŒåˆ†æœç´¢ã€‘é¢è¯•ç°åœºï¼šäºŒåˆ†æœç´¢çš„æ€è€ƒ
ğŸ’¡å†™åœ¨å‰é¢ï¼šæˆ‘çš„é¢˜è§£ä¸æ˜¯ä¸ºäº†å‘Šè¯‰ä½ è¿™é“é¢˜çš„ä»£ç æ˜¯ä»€ä¹ˆï¼Œä¹Ÿä¸æ˜¯ä¸ºäº†å‘Šè¯‰ä½ æœ‰å¤šå°‘å¥‡æŠ€æ·«å·§ï¼Œè€Œæ˜¯è‡´åŠ›äºç”¨æœ€ç®€å•çš„æ€è·¯ï¼Œæœ€æ¸…æ™°çš„è¯­è¨€è§£é‡Šæ¯é“é¢˜èƒŒåçš„å«ä¹‰ï¼Œä»¥åŠé€‰æ‹©æŸç§æŠ€å·§æ¥è§£é¢˜çš„åŸå› ã€‚

# æœ‰è¶£çš„èƒŒæ™¯
åœ¨è®²è¿™é“é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆåˆ†äº«ä¸€ä¸‹**ä¸ºä»€ä¹ˆä¼šåœ¨é¢è¯•ä¸­è€ƒå¯Ÿè¿™é“é¢˜**ã€‚
æˆ‘å…¶å®éå¸¸å–œæ¬¢ç”¨äºŒåˆ†æœç´¢æ¥**è€ƒå¯Ÿé¢è¯•è€…å¯¹åŸºç¡€ç®—æ³•çš„æŒæ¡èƒ½åŠ›**ä»¥åŠ**ä¸¾ä¸€åä¸‰çš„æ€è€ƒèƒ½åŠ›**ï¼Œå› ä¸ºäºŒåˆ†æœç´¢å¹¶ä¸éš¾ï¼Œå¦‚æœæƒ³æ˜ç™½é—®é¢˜ï¼Œé‚£ä¹ˆä»£ç å…¶å®ä¸é‡è¦ï¼Œé‡è¦çš„å°±æ˜¯æ€è€ƒçš„è¿‡ç¨‹ã€‚
ï¼ˆå…¶å®è¿™é“é¢˜å¹¶æ²¡æœ‰åˆ°`hard`éš¾åº¦å§ï¼Œæ€è€ƒæ¸…æ¥šä¹‹åå…¶å®å°±æ˜¯`medium`åä¸Šä¸€ç‚¹ç‚¹ã€‚ï¼‰

æˆ‘ï¼šåŒå­¦æˆ‘ä»¬æ¥åšé“é¢˜å§ï¼š[704.äºŒåˆ†æœç´¢](https://leetcode-cn.com/problems/binary-search/)
åŒå­¦ï¼šï¼ˆç•¥åŠ æ€ç´¢ï¼Œç¬é—´è§£é¢˜ï¼‰
æˆ‘ï¼šä¸é”™ä¸é”™ï¼ŒåŸºæœ¬åŠŸå¾ˆæ‰å®ï¼Œæˆ‘ä»¬å†åšä¸€é“å§~ [774.æœ€å°åŒ–å»åŠ æ²¹ç«™çš„æœ€å¤§è·ç¦»](https://leetcode-cn.com/problems/minimize-max-distance-to-gas-station/)
åŒå­¦ï¼š......æˆ‘èƒ½å†å¬ä¸€éé¢˜ç›®å—ï¼Ÿ
æˆ‘ï¼šå½“ç„¶~
åŒå­¦ï¼šè¦æ±‚çš„æ˜¯**æœ€å¤§é—´è·çš„æœ€å°å€¼**å—ï¼Ÿ
æˆ‘ï¼šå¯¹çš„ã€‚
åŒå­¦ï¼šé‚£æˆ‘èƒ½**æš´åŠ›**æ±‚è§£å—ï¼ˆä¸€æ¬¡å€¼å¾—åŠ åˆ†çš„è¯•æ¢ï¼‰
æˆ‘ï¼šé‚£ä½ è¯´æ€ä¹ˆæ±‚ï¼Ÿ
åŒå­¦ï¼šæˆ‘æŠŠæ¯2ä¸ªç«™ç‚¹ä¹‹é—´çš„é—´è·éƒ½ç®—å‡ºæ¥ï¼Œç„¶ååœ¨æ¯ä¸ªç«™ç‚¹ä¹‹é—´åŠ `k`ä¸ªåŠ æ²¹ç«™ï¼Œç®—å‡ºä»–ä»¬çš„è·ç¦»ï¼Œç„¶åæ±‚ä¸€ä¸ªæœ€å°å€¼ï¼Œè¿™æ ·æ˜¯å¯ä»¥çš„å—ï¼Ÿ
æˆ‘ï¼šé‚£è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿ
åŒå­¦ï¼š....åº”è¯¥æ˜¯O(nK)
æˆ‘ï¼šèƒ½ä¸èƒ½å†ä¼˜åŒ–ä¸€ä¸‹å‘¢ï¼Ÿ
åŒå­¦ï¼š...é‚£...æ±‚å‡º2ä¸ªåŠ æ²¹ç«™ä¹‹é—´è·ç¦»çš„æœ€å¤§å€¼ï¼Œåªå¯¹è¿™ä¸ªæœ€å¤§å€¼èŒƒå›´é‡ŒåŠ kä¸ªåŠ æ²¹ç«™ï¼Œç„¶åå¾—åˆ°è·ç¦»çš„æœ€å°å€¼å‘¢ï¼Ÿ
æˆ‘ï¼šä¸é”™ä¸é”™ï¼Œé‚£åœ¨è¿™ä¸ªèŒƒå›´å†…ä½ è¦æ€ä¹ˆå»æ”¾ç½®kä¸ªåŠ æ²¹ç«™å‘¢ï¼Ÿæ”¾ç½®å®Œkä¸ªä¹‹åï¼Œèƒ½ä¿è¯æœ€å°çš„å€¼è¿˜åœ¨è¿™ä¸ªèŒƒå›´é‡Œé¢å—ï¼Ÿ
åŒå­¦ï¼š...å¥½åƒä¸èƒ½ï¼Œå•Šæˆ‘çŸ¥é“äº†ï¼Œæˆ‘æ¯æ”¾ç½®ä¸€ä¸ªåŠ æ²¹ç«™ï¼Œå°±å»è®¡ç®—å½“å‰æœ€å¤§çš„é—´è·ï¼Œå†å¾€è¿™ä¸ªåŒºé—´é‡Œæ”¾ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼
æˆ‘ï¼šå¤æ‚åº¦æœ‰å˜åŒ–å—ï¼Ÿ
åŒå­¦ï¼š...å¥½åƒæ²¡æœ‰ã€‚
æˆ‘ï¼šæ²¡å…³ç³»ï¼Œæˆ‘ä»¬ä¸€èµ·å†è¯»ä¸€éé¢˜ç›®ï¼Œè·Ÿæˆ‘ä¸€èµ·æ¥æƒ³æƒ³è¿™é“é¢˜æ€ä¹ˆåšã€‚
# è·Ÿæˆ‘ä¸€èµ·æ€è€ƒ
æˆ‘ï¼š**è¿™é“é¢˜åœ¨åšä»€ä¹ˆï¼Ÿ**
åŒå­¦ï¼šæ”¾ç½®kä¸ªåŠ æ²¹ç«™ã€‚
æˆ‘ï¼š**è¦æ±‚ä»€ä¹ˆï¼Ÿ**
åŒå­¦ï¼šæ±‚åŠ æ²¹ç«™æœ€å¤§é—´è·çš„æœ€å°å€¼ã€‚
æˆ‘ï¼š**è¿™ä¸ªé—´è·è·ŸåŠ æ²¹ç«™æ•°é‡æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ**
åŒå­¦ï¼šé—´è·è¶Šå°ï¼Œéœ€è¦çš„åŠ æ²¹ç«™æ•°é‡å°±è¶Šå¤šã€‚
æˆ‘ï¼šæ²¡é”™ï¼Œ**é‚£ä¹ˆä»€ä¹ˆæ—¶å€™é—´è·åˆé€‚å‘¢ï¼Ÿ**
åŒå­¦ï¼šéœ€è¦çš„åŠ æ²¹ç«™æ•°é‡åˆšå¥½æ˜¯kä¸ªã€‚
æˆ‘ï¼šåŒå­¦ä½ èƒ½**ç”»ä¸ªå›¾**è¡¨ç¤ºä¸€ä¸‹é—´è·è·ŸåŠ æ²¹ç«™æ•°é‡çš„å…³ç³»å—ï¼Ÿ
åŒå­¦ï¼š
![f5e794fc71d66e1441597c79258eb08.jpg](https://pic.leetcode-cn.com/1638250685-SJmpGX-f5e794fc71d66e1441597c79258eb08.jpg)
æˆ‘ï¼šä¸é”™ä¸é”™ï¼Œä½ åœ¨å›¾é‡Œæ‰¾æ‰¾`k`åœ¨å“ªå„¿ï¼Ÿ
åŒå­¦ï¼šæˆ‘å¥½åƒçŸ¥é“äº†...
![062ad81a23b01bd6bafb21a40f58c6e.jpg](https://pic.leetcode-cn.com/1638250730-AUzqWc-062ad81a23b01bd6bafb21a40f58c6e.jpg)
æˆ‘ï¼šçŸ¥é“å•¦ï¼Ÿæ‰“ç®—æ€ä¹ˆå†™ï¼Ÿè¯´è¯´æ€è·¯å§ã€‚
åŒå­¦ï¼šäºŒåˆ†æœç´¢åº”è¯¥èƒ½è§£ã€‚
æˆ‘ï¼šä¸ºä»€ä¹ˆï¼Ÿ
åŒå­¦ï¼š**å› ä¸ºè¦æ±‚çš„é—´è·`x`ä¸åŠ æ²¹ç«™çš„æ•°é‡`num`å­˜åœ¨é€’å‡çš„å…³ç³»ï¼Œæ¢ç´¢é—´è·çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æ­¤æ—¶é—´è·å¯¹åº”çš„åŠ æ²¹ç«™æ•°é‡ï¼Œä¸ç»™å®šçš„`k`è¿›è¡Œåˆ¤æ–­ï¼Œå¯ä»¥å°†åŒºé—´è¿›è¡ŒäºŒåˆ†ï¼Œä»è€Œä½¿ç”¨äºŒåˆ†æœç´¢æ¥æ‰¾åˆ°åˆé€‚çš„é—´è·ã€‚**
æˆ‘ï¼šä¸é”™ï¼Œé‚£ä½ è¯´äºŒåˆ†æœç´¢çš„åŒºé—´æ˜¯ä»€ä¹ˆï¼Ÿ
åŒå­¦ï¼šé¢˜ç›®ç»™å®šäº†é—´è·çš„æœ€å°å€¼æ˜¯`0`,æœ€å¤§å€¼æ˜¯$10^8$
æˆ‘ï¼šé‚£å°è¯•ç€å†™ä¸€ä¸‹å§~
åŒå­¦ï¼šï¼ˆä¸‹ç¬”å¦‚æœ‰ç¥ï¼‰
æˆ‘ï¼šä¸é”™ä¸é”™ï¼Œé‚£å°±åˆ°è¿™é‡Œå§~

# ä¸é‚£ä¹ˆé‡è¦çš„é¢˜è§£ä»£ç 
```java []
   public double minmaxGasDist(int[] stations, int k) {
        double minDist = 0, maxDist = 100000000;
        while(maxDist - minDist > 1e-6){
            double midDist = minDist + (maxDist - minDist) / 2.0;
            int needNum = stationsNum(midDist, stations, k);
            if(needNum > k){
                minDist = midDist;
            }else{
                maxDist = midDist;
            }
        }
        return minDist;
    }

    private int stationsNum(double dist, int[] stations, int K){
        int num = 0;
        for(int i = 1; i < stations.length; i++){
            num += (int) ((stations[i] - stations[i - 1])/dist);
        }
        return num;
    }
```
å¦‚æœåœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…ä½ æœ‰æ›´å¥½çš„æ€è·¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸ªé¢˜è§£æœ‰ç¼˜å†è§~
ãƒ¾(â€¢Ï‰â€¢`)o
# 4.774. æ„é€ åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
### å‰è¨€

2022å¹´3æœˆ25æ—¥ï¼Œæœ‰æ–°å¢å­¦ä¹ æ¨¡å—è¯ç”Ÿï¼š[å­¦ä¹ è®¡åˆ’å¹¿åœº](https://leetcode-cn.com/study-plan/)â†’ä¸“é¡¹çªç ´â†’[äºŒåˆ†æŸ¥æ‰¾](https://leetcode-cn.com/study-plan/binary-search/)ï¼Œæˆ‘æ‰“ç®—å’ŒåŒå­¦ä»¬ä¸€èµ·åœ¨æœªæ¥çš„æ—¥å­é‡Œæ‹¿ä¸‹äºŒåˆ†æŸ¥æ‰¾æ¨¡å—çš„æ‰€æœ‰å¾½ç« ï¼š

| å­¦ä¹ è®¡åˆ’ | å­¦ä¹ å¤©æ•° | é¢˜ç›®éš¾åº¦ |
| :---: | :-: | :-----: |
| äºŒåˆ†æŸ¥æ‰¾å…¥é—¨ | 12 | ç®€å•16 ä¸­ç­‰7 å›°éš¾0 |
| äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ | 20 | ç®€å•0 ä¸­ç­‰39 å›°éš¾1 |
| äºŒåˆ†æŸ¥æ‰¾è¿›é˜¶ | 23 | ç®€å•4 ä¸­ç­‰14 å›°éš¾29 |

æœ¬é¢˜ä¸ºäºŒåˆ†æŸ¥æ‰¾è¿›é˜¶ç¬¬ $19$ å¤©ç¬¬ $1$ é¢˜ã€‚

è¿™é‡Œæˆ‘ä»¬ç”¨è“çº¢äºŒåˆ†æ³•è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥å…ˆçœ‹ [34. è“çº¢äºŒåˆ†æ³•å•æ¨¡æ¿ç§’æ€äºŒåˆ†æŸ¥æ‰¾](https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/solution/lan-hong-hua-fen-fa-dan-mo-ban-miao-sha-e7r40/) ã€‚

#### æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾ã€é€šè¿‡ã€‘

è¿™é“é¢˜æœç´¢åŒºé—´å¾ˆå®¹æ˜“æ„é€ ï¼Œè®¾æƒ³ä¸€ç§æç«¯æƒ…å†µï¼Œ$k=0$ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯æ‰€æœ‰ç›¸é‚»åŠ æ²¹ç«™ä¹‹é—´çš„æœ€å¤§è·ç¦» $maxDist$ï¼Œå¦ä¸€ç§æç«¯æƒ…å†µï¼Œ$k \to âˆ$ï¼Œé‚£ä¹ˆç»“æœå°±æ— é™è¶‹è¿‘äº $0$ï¼ŒäºŒåˆ†æŸ¥æ‰¾åŒºé—´æ„é€ ä¸º $(0, maxDist]$ï¼Œæœ€å°å•ä½ä¸ºè¯¯å·® $10^{-5}$ã€‚

ä¸‹é¢è¿›è¡Œè“çº¢äºŒåˆ†ï¼Œè®¾æ°å¥½å®¹çº³ $k$ ä¸ªåŠ æ²¹ç«™çš„æœ€å¤§è·ç¦»ä¸º $thresholdDist$ï¼Œ
å·¦è¾¹è“è‰²åŒºåŸŸ $dist \in (0, thresholdDist]$ï¼Œå®¹çº³åŠ æ²¹ç«™ä¸ªæ•° $>k$ ä¸ªï¼›
å³è¾¹çº¢è‰²åŒºåŸŸ $dist \in (thresholdDist, maxDist]$ï¼Œå®¹çº³åŠ æ²¹ç«™ä¸ªæ•° $\le k$ ä¸ªï¼›
ç»“æœè¿”å› $r$ æŒ‡é’ˆå€¼ã€‚

æœ‰åŒå­¦ä¼šé—®ï¼Œ$=$ æƒ…å†µä¸ºä»€ä¹ˆä¸åˆ’åˆ†åœ¨å·¦è¾¹è“è‰²åŒºåŸŸï¼Œå¦‚æœåˆ’åˆ†åœ¨å·¦è¾¹ï¼Œä¼šå¯¼è‡´ä¼šæœ‰å¤šä¸ªè·ç¦»ä½¿å¾—å®¹çº³åŠ æ²¹ç«™ä¸ªæ•° $=k$ ä¸ªï¼Œåˆ’åˆ†åœ¨çº¢è‰²åŒºåŸŸä¿è¯å¤¹é€¼åˆ°æœ€åç»“æœå”¯ä¸€ã€‚

è¿™é‡Œçš„è“çº¢äºŒåˆ†æ³•æ‹“å±•åˆ°å®æ•°é›†ï¼š

| é¢˜ç›® | é¢˜è§£ | æ–¹æ³• |
| :----- | ------ | ------ |
| [786. ç¬¬ K ä¸ªæœ€å°çš„ç´ æ•°åˆ†æ•°](https://leetcode.cn/problems/k-th-smallest-prime-fraction/) | [786. å®æ•°é›†ä¸Šçš„è“çº¢äºŒåˆ†æ³•](https://leetcode.cn/problems/k-th-smallest-prime-fraction/solution/by-sui-xin-yuan-2zwh/) | äºŒåˆ†æŸ¥æ‰¾ |

```C++ []
class Solution {
public:
    // è·ç¦»é—´éš™å¯ä»¥å®¹çº³å¤šå°‘ä¸ªåŠ æ²¹ç«™
    int count(vector<int>& stations, double dist) {
        int cnt = 0;
        for (int i = 1; i < stations.size(); ++i) {
            cnt += (stations[i]-stations[i-1]) / dist;
        }
        return cnt;
    }

    double minmaxGasDist(vector<int>& stations, int k) {
        int maxDist = 0;
        for (int i = 1; i < stations.size(); ++i) {
            maxDist = max(maxDist, stations[i]-stations[i-1]);
        }
        double eps = 1e-6;
        double l = 0, r = maxDist*1.0 + eps; //(0, maxDist]
        while (l + eps < r) {
            double mid = (l+r)/2;
            if (count(stations, mid) > k) {
                l = mid;
            } else {
                r = mid;
            }
        }
        return r;
    }
};
```

æ”¹å†™æˆå¸ƒå°”åˆ¤æ–­åŠ é€Ÿï¼š

```C++ []
class Solution {
public:
    // è·ç¦»é—´éš™å¯ä»¥å®¹çº³è¶…è¿‡kä¸ªåŠ æ²¹ç«™
    bool possible(vector<int>& stations, int k, double dist) {
        int cnt = 0;
        for (int i = 1; i < stations.size(); ++i) {
            cnt += (stations[i]-stations[i-1]) / dist;
            if (cnt > k) {
                return true;
            }
        }
        return false;
    }

    double minmaxGasDist(vector<int>& stations, int k) {
        int maxDist = 0;
        for (int i = 1; i < stations.size(); ++i) {
            maxDist = max(maxDist, stations[i]-stations[i-1]);
        }
        double eps = 1e-6;
        double l = 0, r = maxDist*1.0 + eps; //(0, maxDist]
        while (l + eps < r) {
            double mid = (l+r)/2;
            if (possible(stations, k, mid)) {
                l = mid;
            } else {
                r = mid;
            }
        }
        return r;
    }
};
```

### æ‹“å±•

[äºŒåˆ†æŸ¥æ‰¾æ¨¡å—å…¨è§£](https://leetcode.cn/circle/article/xYBtLt/)
