# 1069äº§å“é”€å”®åˆ†æ II
<p>é”€å”®è¡¨ï¼š<code>Sales</code></p>

<pre>+-------------+-------+
| Column Name | Type  |
+-------------+-------+
| sale_id     | int   |
| product_id  | int   |
| year        | int   |
| quantity    | int   |
| price       | int   |
+-------------+-------+
sale_id æ˜¯è¿™ä¸ªè¡¨çš„ä¸»é”®ã€‚
product_id æ˜¯ Product è¡¨çš„å¤–é”®ã€‚
è¯·æ³¨æ„ä»·æ ¼æ˜¯æ¯å•ä½çš„ã€‚
</pre>

<p>äº§å“è¡¨ï¼š<code>Product</code></p>

<pre>+--------------+---------+
| Column Name  | Type    |
+--------------+---------+
| product_id   | int     |
| product_name | varchar |
+--------------+---------+
product_id æ˜¯è¿™ä¸ªè¡¨çš„ä¸»é”®ã€‚
</pre>

<p>&nbsp;</p>

<p>ç¼–å†™ä¸€ä¸ª SQL æŸ¥è¯¢ï¼ŒæŒ‰äº§å“ id <code>product_id</code> æ¥ç»Ÿè®¡æ¯ä¸ªäº§å“çš„é”€å”®æ€»é‡ã€‚</p>

<p>&nbsp;</p>

<p>æŸ¥è¯¢ç»“æœæ ¼å¼å¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤º:</p>

<pre><code>Sales</code> è¡¨ï¼š
+---------+------------+------+----------+-------+
| sale_id | product_id | year | quantity | price |
+---------+------------+------+----------+-------+ 
| 1       | 100        | 2008 | 10       | 5000  |
| 2       | 100        | 2009 | 12       | 5000  |
| 7       | 200        | 2011 | 15       | 9000  |
+---------+------------+------+----------+-------+

Product è¡¨ï¼š
+------------+--------------+
| product_id | product_name |
+------------+--------------+
| 100        | Nokia        |
| 200        | Apple        |
| 300        | Samsung      |
+------------+--------------+

Result è¡¨ï¼š
+--------------+----------------+
| product_id   | total_quantity |
+--------------+----------------+
| 100          | 22             |
| 200          | 15             |
+--------------+----------------+</pre>
































# è§£é¢˜:
# 1.ã€é²¸æã€‘1069. äº§å“é”€å”®åˆ†æ IIï¼ˆè€ƒç‚¹ï¼šgroup by + èšåˆå‡½æ•°ï¼‰
##### æ€è·¯

![image.png](https://pic.leetcode-cn.com/1651736376-rjxYAi-image.png)

æœ¬é¢˜è€ƒå¯Ÿ`group by + aggå‡½æ•°`çš„ä½¿ç”¨ã€‚å¤§å®¶å®¡é¢˜çš„æ—¶å€™ï¼Œåœˆå‡ºå…³é”®å­—ã€‚çœ‹åˆ°ã€æ¯ä¸ªã€‘è¿™ç§å­—çœ¼ï¼Œä¸€èˆ¬éƒ½æ˜¯group byæˆ–è€…partition byç›¸å…³çš„ã€‚

##### ç®—æ³•

è¿™é‡Œç›´æ¥ä½¿ç”¨ group by product_id ç„¶åå¯¹ quantity è¿›è¡Œ sum å³å¯ã€‚

##### ç­”æ¡ˆ

```sql
select
    product_id,
    sum(quantity) as total_quantity
from Sales
group by product_id
# group by 1 æ˜¯ä¸€æ ·çš„
# æ³¨æ„ç¼©è¿›æå‡å¯è¯»æ€§
```

ğŸ¥°è§‰å¾—è¿˜ä¸é”™çš„è¯ï¼Œç‚¹ä¸ªèµï¼ŒåŠ ä¸ªå…³æ³¨å§~ğŸ¥°
# 2.1069.äº§å“é”€å”®åˆ†æII
```mysql
# Write your MySQL query statement below
# å†…é“¾æ¥æŸ¥è¯¢
select p.product_id,sum(s.quantity) as total_quantity
from Product p inner join Sales s on p.product_id = s.product_id
group by p.product_id;
```

# 3.ã€track & traningã€‘æ€è·¯ç®€å•ï¼Œæ€§èƒ½é«˜æ•ˆ
### æ–¹ä¾¿å¿«é€Ÿå­¦ä¹ ç®—æ³•ä¸ç†è§£~
ğŸŒ‡ ç‚¹èµ ğŸ‘ æ”¶è— â­ç•™è¨€ ğŸ“ ä¸€é”®ä¸‰è¿ ~å…³æ³¨Jamï¼Œä»ä½ æˆ‘åšèµ·ï¼

**å…„å¼Ÿä¼šèƒŒå›ä½ ï¼Œå¥³äººä¼šç¦»å¼€ä½ ï¼Œé‡‘é’±ä¼šè¯±æƒ‘ä½ ï¼Œç”Ÿæ´»ä¼šåˆéš¾ä½ ï¼Œåªæœ‰æ•°å­¦ä¸ä¼šï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼š**
**å¤©æ‰ä¸å¦ï¼Œå–å†³äºæœ€ç»ˆè¾¾åˆ°çš„é«˜åº¦ã€‚çœŸæ­£çš„å¤©æ‰æ˜¯é‚£äº›è„šè¸å®åœ°çš„äºº**
**é™ä¸‹å¿ƒæ¥å¥½å¥½åšè‡ªå·±ï¼Œèµ°ç¨³è„šä¸‹æ¯ä¸€æ­¥ï¼Œå°±æ˜¯æœ€å¥½çš„è·¯ï¼Œå¼ºè€…éƒ½æ˜¯å­¤ç‹¬çš„**

æ¨è python ç®—æ³•çš„ä¹¦ç±ï¼Œä½“ç³»åŒ–å­¦ä¹ ç®—æ³•ä¸æ•°æ®ç»“æ„ï¼Œç”¨æ­£ç¡®çš„æ–¹å¼æˆä¸ºofferæ”¶å‰²æœº
[leetcode](https://github.com/ls1248659692/leetcode) â€”â€”  **ç³»ç»ŸåŒ–å¿«é€Ÿå­¦ä¹ ç®—æ³•ï¼Œè¿™ä¸æ˜¯å†…å·ï¼Œè¿™åªæ˜¯æ‚„æ‚„åœ°åŠªåŠ›ï¼Œç„¶åæƒŠè‰³æ‰€æœ‰çš„äºº**

---
### æ±‚è§£æ€è·¯
1. GROUP BY
2. SUM

### ä»£ç 

```mysql
# Write your MySQL query statement below
SELECT 
    product_id,
    sum(quantity) total_quantity 
FROM 
    sales 
GROUP BY product_id;
```
# 4.ä»å°ç™½è§†è§’åˆ†æâ€”â€”äº§å“é”€å”®åˆ†æ IIï¼ˆä¸¤ç§æ–¹æ³•ï¼‰
## åˆ†æ

`sales` è¡¨ä¸­å°±æœ‰æ¯ä¸ªäº§å“çš„é”€é‡ `quantity` ï¼Œè€Œä¸”è¾“å‡ºçš„å­—æ®µä¹Ÿéƒ½åœ¨ `sales` è¡¨ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œ `product` è¡¨æ²¡æœ‰ä½œç”¨ã€‚

## SQLï¼šæ–¹æ³•ä¸€

```sql
select 
	product_id,
  sum(quantity) total_quantity 
from sales group by product_id;
```

## è§£æ

1. ä½¿ç”¨ `group by` å¯¹ `product_id` åˆ†ç»„
2. ä½¿ç”¨èšåˆå‡½æ•° `sum()` è®¡ç®— `quantity`

## SQLï¼šæ–¹æ³•äºŒ

```sql
select 
	distinct product_id,
	sum(quantity) over(partition by product_id) total_product
from sales;
```

## è§£æ

1. è¿™é‡Œä½¿ç”¨çª—å£å‡½æ•°æŒ‰ç…§ `product_id` è¿›è¡Œåˆ†ç»„
2. ä½¿ç”¨èšåˆå‡½æ•° `sum()` è®¡ç®— `quantity`

æ›´å¤šé¢˜è§£ï¼šhttps://github.com/astak16/blog-mysql/issues/49
