# 656é‡‘å¸è·¯å¾„
<p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>A</code>ï¼ˆä¸‹æ ‡ä» <code>1</code> å¼€å§‹ï¼‰åŒ…å« N ä¸ªæ•´æ•°ï¼šA<sub>1</sub>ï¼ŒA<sub>2</sub>ï¼Œ&hellip;&hellip;ï¼ŒA<sub>N</sub>&nbsp;å’Œä¸€ä¸ªæ•´æ•° <code>B</code>ã€‚ä½ å¯ä»¥ä»æ•°ç»„ <code>A</code> ä¸­çš„ä»»ä½•ä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä¸º <code>i</code>ï¼‰è·³åˆ°ä¸‹æ ‡&nbsp;<code>i+1</code>ï¼Œ<code>i+2</code>ï¼Œ&hellip;&hellip;ï¼Œ<code>i+B</code>&nbsp;çš„ä»»æ„ä¸€ä¸ªå¯ä»¥è·³åˆ°çš„ä½ç½®ä¸Šã€‚å¦‚æœä½ åœ¨ä¸‹æ ‡ä¸º <code>i</code> çš„ä½ç½®ä¸Šï¼Œä½ éœ€è¦æ”¯ä»˜ A<sub>i</sub> ä¸ªé‡‘å¸ã€‚å¦‚æœ A<sub>i</sub> æ˜¯ -1ï¼Œæ„å‘³ç€ä¸‹æ ‡ä¸º <code>i</code> çš„ä½ç½®æ˜¯ä¸å¯ä»¥è·³åˆ°çš„ã€‚</p>

<p>ç°åœ¨ï¼Œä½ å¸Œæœ›èŠ±è´¹æœ€å°‘çš„é‡‘å¸ä»æ•°ç»„ <code>A</code> çš„ <code>1</code> ä½ç½®è·³åˆ°&nbsp;<code>N</code> ä½ç½®ï¼Œä½ éœ€è¦è¾“å‡ºèŠ±è´¹æœ€å°‘çš„è·¯å¾„ï¼Œä¾æ¬¡è¾“å‡ºæ‰€æœ‰ç»è¿‡çš„ä¸‹æ ‡ï¼ˆä» 1 åˆ° Nï¼‰ã€‚</p>

<p>å¦‚æœæœ‰å¤šç§èŠ±è´¹æœ€å°‘çš„æ–¹æ¡ˆï¼Œè¾“å‡ºå­—å…¸é¡ºåºæœ€å°çš„è·¯å¾„ã€‚</p>

<p>å¦‚æœæ— æ³•åˆ°è¾¾ N ä½ç½®ï¼Œè¯·è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>

<p>&nbsp;</p>

<p><strong>æ ·ä¾‹ 1 :</strong></p>

<pre><strong>è¾“å…¥:</strong> [1,2,4,-1,2], 2
<strong>è¾“å‡º:</strong> [1,3,5]
</pre>

<p>&nbsp;</p>

<p><strong>æ ·ä¾‹ 2 :</strong></p>

<pre><strong>è¾“å…¥:</strong> [1,2,4,-1,2], 1
<strong>è¾“å‡º:</strong> []
</pre>

<p>&nbsp;</p>

<p><strong>æ³¨é‡Š :</strong></p>

<ol>
	<li>è·¯å¾„ Pa<sub>1</sub>ï¼ŒPa<sub>2</sub>ï¼Œ&hellip;&hellip;ï¼ŒPa<sub>n&nbsp;</sub>æ˜¯å­—å…¸åºå°äº Pb<sub>1</sub>ï¼ŒPb<sub>2</sub>ï¼Œ&hellip;&hellip;ï¼ŒPb<sub>m&nbsp;</sub>çš„ï¼Œå½“ä¸”ä»…å½“ç¬¬ä¸€ä¸ª Pa<sub>i</sub> å’Œ Pb<sub>i</sub> ä¸åŒçš„ <code>i</code> æ»¡è¶³ Pa<sub>i</sub> &lt; Pb<sub>i</sub>ï¼Œå¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ <code>i</code> é‚£ä¹ˆæ»¡è¶³ <code>n</code> &lt; <code>m</code>ã€‚</li>
	<li>A<sub>1</sub> &gt;= 0ã€‚&nbsp;A<sub>2</sub>, ..., A<sub>N</sub>&nbsp;ï¼ˆå¦‚æœå­˜åœ¨ï¼‰&nbsp;çš„èŒƒå›´æ˜¯ [-1, 100]ã€‚</li>
	<li>A æ•°ç»„çš„é•¿åº¦èŒƒå›´ [1, 1000].</li>
	<li>B çš„èŒƒå›´&nbsp;[1, 100].</li>
</ol>

<p>&nbsp;</p>
































# è§£é¢˜:
# 1.é‡‘å¸è·¯å¾„
#### æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•ã€è¶…å‡ºæ—¶é—´é™åˆ¶ã€‘

æœ¬æ–¹æ³•ä¸­ä½¿ç”¨ä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ $next$ å’Œ $nums$ï¼Œå…¶ä¸­ $n$ æ˜¯ $A$ çš„é•¿åº¦ï¼Œ$nums[i]$ è¡¨ç¤ºä» $i$ è·³åˆ°ç»ˆç‚¹çš„æœ€å°èŠ±è´¹ã€‚

å°†æ•°ç»„ $next$ çš„æ‰€æœ‰ä½ç½®åˆå§‹åŒ–ä¸º -1ï¼Œç„¶åé€’å½’è°ƒç”¨ `jump(A, B, i, next)` ä»åå‘å‰è®¡ç®—æ•°ç»„ $next$ï¼Œå…¶ä¸­ $A$ æ˜¯é‡‘å¸æ•°ç»„ï¼Œ$B$ æ˜¯æœ€å¤§è·³è·ƒè·ç¦»ã€‚

åœ¨ä½ç½® $i$ å¤„ï¼Œå¯ä»¥è·³è·ƒåˆ°ä» $i+1$ åˆ° $i+B$ ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªä½ç½®ä¸Šã€‚å‡è®¾è·³è·ƒåˆ°äº† $j$ å¤„ï¼Œé‚£ä¹ˆä» $i$ åˆ°ç»ˆç‚¹çš„èŠ±è´¹ä¸º $A[i] + jump(A, B, j, next)$ï¼Œå¦‚æœæ­¤èŠ±è´¹å°äºå½“å‰çš„æœ€å°èŠ±è´¹ï¼Œåˆ™æ›´æ–° $next[i]=A[i] + jump(A, B, j, next)$ã€‚

æ¯æ¬¡è°ƒç”¨æ–¹æ³• `jump` éƒ½ä¼šè¿”å›ä» $i$ è·³è·ƒåˆ°ç»ˆç‚¹çš„æœ€å°èŠ±è´¹ã€‚

æ•°ç»„ $next$ å­˜å‚¨äº†æœ€å°èŠ±è´¹çš„è·³è·ƒæ–¹å¼ï¼Œä»ä½ç½® 1 å¼€å§‹éå† $next$ã€‚åœ¨æ¯ä¸€æ­¥ï¼Œéƒ½æŠŠå½“å‰ä½ç½®æ·»åŠ åˆ° $res$ï¼Œç„¶åæ‰¾åˆ°ä¸‹ä¸€è·³çš„ä½ç½® $next[i]$ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾ã€‚

```java [solution1-Java]
public class Solution {
    public List < Integer > cheapestJump(int[] A, int B) {
        int[] next = new int[A.length];
        Arrays.fill(next, -1);
        jump(A, B, 0, next);
        List < Integer > res = new ArrayList();
        int i;
        for (i = 0; i < A.length && next[i] > 0; i = next[i])
            res.add(i + 1);
        if (i == A.length - 1 && A[i]>= 0)
            res.add(A.length);
        else
            return new ArrayList < Integer > ();
        return res;
    }
    public long jump(int[] A, int B, int i, int[] next) {
        if (i == A.length - 1 && A[i] >= 0)
            return A[i];
        long min_cost = Integer.MAX_VALUE;
        for (int j = i + 1; j <= i + B && j < A.length; j++) {
            if (A[j] >= 0) {
                long cost = A[i] + jump(A, B, j, next);
                if (cost < min_cost) {
                    min_cost = cost;
                    next[i] = j;
                }
            }
        }
        return min_cost;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(B^n)$ï¼Œå…¶ä¸­ $B$ æ˜¯æœ€å¤§è·³è·ƒè·ç¦»ï¼Œ$n$ æ˜¯æ•°ç»„ $A$ çš„é•¿åº¦ã€‚æœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸€è·³éƒ½æœ‰ $B$ ç§å¯èƒ½æ€§ï¼Œé€’å½’æ ‘çš„æœ€å¤§æ·±åº¦ä¸º $O(B^n)$ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚æ¯æ¬¡é€’å½’è°ƒç”¨æ·±åº¦æœ€å¤§ä¸º $n$ï¼Œæ•°ç»„ $next$ çš„é•¿åº¦ä¸º $n$ã€‚


#### æ–¹æ³•äºŒï¼šå¸¦è®°å¿†çš„é€’å½’ã€é€šè¿‡ã€‘

**ç®—æ³•**

åœ¨ *æ–¹æ³•ä¸€* çš„é€’å½’ä¸­ï¼Œä¸€ç§è·³è·ƒæ–¹å¼è¢«å¤šæ¬¡è®¡ç®—ï¼Œå› æ­¤å­˜åœ¨å¤§é‡é‡å¤è°ƒç”¨ã€‚ä¸ºäº†æ¶ˆé™¤è¿™äº›å†—ä½™è°ƒç”¨ï¼Œè®°å½•æ¯æ¬¡è°ƒç”¨çš„è¿”å›å€¼ã€‚

åˆ›å»ºæ•°ç»„ $memo$ï¼Œ$memo[i]$ è®°å½•ä» $i$ è·³è·ƒåˆ°æœ«å°¾çš„æœ€å°èŠ±è´¹ã€‚æŠŠæ¯æ¬¡è°ƒç”¨çš„ç»“æœéƒ½ä¿å­˜åœ¨ $memo$ ä¸­ï¼Œä¸‹æ¬¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•æ—¶ï¼Œç›´æ¥ä» $memo$ ä¸­è¿”å›ç»“æœã€‚è¿™ç§æ–¹æ³•å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†é‡å¤è°ƒç”¨é—®é¢˜ã€‚

```java [solution2-Java]
public class Solution {
    public List < Integer > cheapestJump(int[] A, int B) {
        int[] next = new int[A.length];
        Arrays.fill(next, -1);
        long[] memo = new long[A.length];
        jump(A, B, 0, next, memo);
        List < Integer > res = new ArrayList();
        int i;
        for (i = 0; i < A.length && next[i] > 0; i = next[i])
            res.add(i + 1);
        if (i == A.length - 1 && A[i] >= 0)
            res.add(A.length);
        else
            return new ArrayList < Integer > ();
        return res;
    }
    public long jump(int[] A, int B, int i, int[] next, long[] memo) {
        if (memo[i] > 0)
            return memo[i];
        if (i == A.length - 1 && A[i] >= 0)
            return A[i];
        long min_cost = Integer.MAX_VALUE;
        for (int j = i + 1; j <= i + B && j < A.length; j++) {
            if (A[j] >= 0) {
                long cost = A[i] + jump(A, B, j, next, memo);
                if (cost < min_cost) {
                    min_cost = cost;
                    next[i] = j;
                }
            }
        }
        memo[i] = min_cost;
        return min_cost;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(nB)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $A$ çš„é•¿åº¦ã€‚è®¡ç®—é•¿åº¦ä¸º $n$ çš„æ•°ç»„ $memo$ï¼Œéå†æ•°ç»„ $next$ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚é€’å½’è°ƒç”¨çš„æœ€å¤§æ·±åº¦ä¸º $n$ï¼Œæ•°ç»„ $next$ çš„å¤§å°ä¸º $n$ã€‚ 


#### æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’ã€é€šè¿‡ã€‘

**ç®—æ³•**

ä»å‰ä¸¤ç§æ–¹æ³•å¯ä»¥çœ‹å‡ºï¼Œä»ä½ç½® $i$ è·³è·ƒæ•°ç»„ $A$ æœ«å°¾çš„èŠ±è´¹åªä¸ $i$ åé¢çš„å…ƒç´ ç›¸å…³ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’è§£å†³æ­¤é—®é¢˜ã€‚

åˆ›å»ºæ•°ç»„ $next$ è®°å½•ä¸‹ä¸€è·³çš„ä½ç½®ï¼Œæ•°ç»„ $dp$ è®°å½•æœ€å°èŠ±è´¹ï¼Œ$dp[i]$ è¡¨ç¤ºä»ä½ç½® $i$ è·³è·ƒåˆ°æœ«å°¾çš„æœ€å°èŠ±è´¹ã€‚ä»æœ€åä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œå‘å‰è®¡ç®—æ•°ç»„ $next$ å’Œ $dp$ã€‚

åœ¨ä½ç½® $i$ å¤„ï¼Œä¸‹ä¸€è·³å¯èƒ½çš„ä½ç½®æ˜¯ä» $i+1$ åˆ° $i+B$ ä¸­ä»»æ„ä¸€ä¸ªã€‚å‡è®¾ä¸‹ä¸€è·³ä¸º $j$ æ—¶ï¼Œä» $i$ è·³è·ƒåˆ°ç»ˆç‚¹çš„èŠ±è´¹æœ€å°ï¼Œæ­¤æ—¶æ›´æ–° $next[i]=j$ï¼Œ$dp[i]=A[i]+dp[j]$ï¼Œå¹¶å°†å½“å‰ç»“æœç”¨äºä¹‹åçš„è®¡ç®—ä¸­ã€‚

æœ€åï¼Œæ ¹æ®æ•°ç»„ $next$ æ‰¾å‡ºæœ€å°èŠ±è´¹çš„è·¯å¾„å¹¶è¿”å›ã€‚

```java [solution3-Java]
public class Solution {
    public List < Integer > cheapestJump(int[] A, int B) {
        int[] next = new int[A.length];
        long[] dp = new long[A.length];
        Arrays.fill(next, -1);
        List < Integer > res = new ArrayList();
        for (int i = A.length - 2; i >= 0; i--) {
            long min_cost = Integer.MAX_VALUE;
            for (int j = i + 1; j <= i + B && j < A.length; j++) {
                if (A[j] >= 0) {
                    long cost = A[i] + dp[j];
                    if (cost < min_cost) {
                        min_cost = cost;
                        next[i] = j;
                    }
                }
            }
            dp[i] = min_cost;
        }
        int i;
        for (i = 0; i < A.length && next[i] > 0; i = next[i])
            res.add(i + 1);
        if (i == A.length - 1 && A[i] >= 0)
            res.add(A.length);
        else
            return new ArrayList < Integer > ();
        return res;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(nB)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $A$ çš„é•¿åº¦ã€‚åœ¨æ¯ä¸ªä½ç½®å¤„ï¼Œéƒ½æœ‰ $B$ ç§è·³è·ƒæ–¹å¼ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œæ•°ç»„ $dp$ å’Œ $next$ çš„å¤§å°éƒ½ä¸º $n$ã€‚
# 2.ã€daydayUpppğŸˆã€‘ä»åå¾€å‰åŠ¨æ€è§„åˆ’
#### è§£é¢˜æ€è·¯

**å˜é‡å®šä¹‰ï¼š**

$dp[i]$ï¼šè¡¨ç¤ºä» $coins[i]$ è·³åˆ° $coins[n-1]$ çš„æœ€å°å¼€é”€

å› ä¸ºè¦å­—å…¸åºæœ€å°ï¼Œæ‰€ä»¥æˆ‘ä»¬ **ä»åå¾€å‰** è¿›è¡ŒåŠ¨æ€è§„åˆ’è½¬ç§»ï¼Œå› ä¸ºä»åå¾€å‰æ—¶ï¼Œèƒ½è½¬ç§»å°±è½¬ç§»ï¼Œè€Œå½“è½¬ç§»å¼€é”€ç›¸åŒæ—¶å› ä¸ºéœ€è¦æ—¶è·¯å¾„çš„å­—å…¸åºæœ€å°ï¼Œæ‰€ä»¥å°½é‡è·³åˆ°æ›´è¿‘çš„æƒ…å†µæ˜¯æœ€ä¼˜çš„ï¼Œæœ€åæ ¹æ® $dp[]$ æ¥è¾“å‡ºè·¯å¾„å³å¯ã€‚

**å…·ä½“çœ‹ä»£ç å®ç°å³å¯ï¼Œæœ‰ä»»ä½•ç–‘é—®æ¬¢è¿è¯„è®ºåŒºæŒ‡å‡º** ğŸ¬

#### CODE

```cpp
class Solution {
public:
    int dp[1005];// dp[i] è¡¨ç¤ºè·³åˆ° i çš„æœ€å°å¼€é”€
    vector<int> cheapestJump(vector<int>& coins, int maxJump) {
        int n = coins.size();
        if(coins[n - 1] == -1) return {};
        if(n == 1) return {1};
        dp[n - 1] = 0;
        for(int i = n - 2;i >= 0;i --) {
            dp[i] = 1e9;
            if(coins[i] == -1) continue;
            for(int j = 1;j <= maxJump && i + j < n;j ++) {
                if(dp[i] > coins[i] + dp[i + j]) {
                    dp[i] = coins[i] + dp[i + j];
                }
            }
        }
        if(dp[0] == 1e9) {
            return {};
        }
        vector<int> res = {1};
        int pre = 0;
        for(int i = 1;i < n;i ++) {
            if(dp[i] == dp[pre] - coins[pre]) {
                res.push_back(i + 1);
                pre = i;
            }
        }
        return res;
    }
};
```
# 3.åŠ¨æ€è§„åˆ’100%
### è§£é¢˜æ€è·¯
æ­¤å¤„æ’°å†™è§£é¢˜æ€è·¯

### ä»£ç 

```java
class Solution {
    public List<Integer> cheapestJump(int[] coins, int maxJump) {
        //åŠ¨æ€è§„åˆ’
        int[]next=new int[coins.length];//é•¿åº¦æ•°ç»„
        long []dp=new long[coins.length];//åŠ¨æ€è§„åˆ’
        //dp[n]  dp[n-1]
        Arrays.fill(next,-1);//é»˜è®¤å€¼ä¸‹ä¸€ä¸ª-1
        List<Integer> res=new ArrayList<>();//æ„é€ æ•°ç»„

        for(int i=coins.length-2;i>=0;i--){
            long min_cost=Integer.MAX_VALUE;//ä¿å­˜æœ€å°èŠ±è´¹
            //è·³è·ƒ
            for(int j=i+1;j<=i+maxJump && j<coins.length;j++){
                if(coins[j]>=0){
                    long cost=coins[i]+dp[j];//èŠ±é”€
                    if(cost<min_cost){
                        min_cost=cost;
                        next[i]=j;//è®°å½•æœ€å°èŠ±é”€
                    }

                }
            }

            dp[i]=min_cost;//ä¿å­˜æœ€å°èŠ±è´¹
        }
        int i=0;
        for(i=0;i<coins.length &&next[i]>0 ;i=next[i]){ //æ¨¡æ‹Ÿ  è·³è·ƒ
            res.add(i+1);

        }
        if(i==coins.length-1 && coins[i]>=0){ //è·³åˆ°æœ€å
            res.add(coins.length);//é•¿åº¦
        }else{
            return res;//è¿”å›ç©º
        }



        return res;//ç»“æœ

    }
}
```
# 4.å€’ç€è®°å¿†åŒ–æœç´¢
### è§£é¢˜æ€è·¯
1. å€’æ¨ï¼Œä»ç´¢å¼• len(coins)-1 è·³åˆ° 0
2. dfs è¿”å› ï¼ˆcost,path)
3. ä¸ºäº†è·å–ä¹‹å‰çš„è·¯å¾„ï¼Œéœ€è¦ååºdfs

### ä»£ç 

```python3
from typing import List, Tuple
from functools import lru_cache

INF = 0x3FFFFFFF

class Solution:
    def cheapestJump(self, coins: List[int], maxJump: int) -> List[int]:
        # ä»index=curè·³åˆ°index=0
        @lru_cache(None)
        def dfs(cur: int) -> Tuple[int, List[int]]:
            # dfs è¿”å›cost å’Œ path
            if cur == 0:
                return (0, [1])

            if coins[cur] == -1:
                return (INF, [])

            cost, path = INF, []

            maxLeft = max(0, cur - maxJump)
            for next in range(maxLeft, cur):
                if coins[next] == -1:
                    continue
                preCost, prePath = dfs(next)
                costCand, pathCand = preCost + coins[next], prePath + [cur + 1]
                if costCand < cost or (costCand == cost and pathCand < path):
                    # print(cur, path, pathCand, cost, costCand)
                    cost = costCand
                    path = pathCand

            return (cost, path)

        _, path = dfs(len(coins) - 1)

        return path
```
